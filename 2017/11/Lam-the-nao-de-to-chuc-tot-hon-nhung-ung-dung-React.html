<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Làm thế nào để tổ chức tốt hơn những ứng dụng React · Learn and Share</title><meta name="description" content="Làm thế nào để tổ chức tốt hơn những ứng dụng React - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Làm thế nào để tổ chức tốt hơn những ứng dụng React"><meta property="og:image" content="https://cdn-images-1.medium.com/max/2000/1*HSisLuifMO6KbLfPOKtLow.jpeg"><meta property="og:description" content="I’ve been working on very large web applications for the past few years, starting from ground zero and, with a dozen other developers, making them scale up to now be used by millions of people. And sometimes, if you didn’t start with a good architecture, it can become difficult to keep your code organized.
Nathanael Beisiegel wrote an interesting article where he explains his strategy in the organization of large React applications, but I still wasn’t completely satisfied by his approach. So I decided to spend some time to figure out what could be the best way to organize my future React projects."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Làm thế nào để tổ chức tốt hơn những ứng dụng React</h1><h2 class="post-subtitle"></h2><header class="post-info">Nov 13, 2017<div class="tags"><a href="/tags/react" class="tag-link">#react</a><a href="/tags/javascript" class="tag-link">#javascript</a></div><div class="fb-ir-time"><time datetime="2017-11-13T16:48:00.000Z" class="op-modified"></time><time datetime="2017-11-13T16:48:00.000Z" class="op-published"></time></div></header></div><div class="post-banner"><img src="https://cdn-images-1.medium.com/max/2000/1*HSisLuifMO6KbLfPOKtLow.jpeg"></div><div class="wrap"><div class="post-content"><p>I’ve been working on very large web applications for the past few years, starting from ground zero and, with a dozen other developers, making them scale up to now be used by millions of people. And sometimes, if you didn’t start with a good architecture, it can become difficult to keep your code organized.</p>
<p><a href="http://engineering.kapost.com/author/nathanaelbeisiegel/" target="_blank" rel="noopener">Nathanael Beisiegel</a> wrote an interesting article where he explains his strategy in the organization of large React applications, but I still wasn’t completely satisfied by his approach. So I decided to spend some time to figure out what could be the best way to organize my future React projects.<br><a id="more"></a><br>Note: I use Redux files in all the examples of this article. If you don’t know what Redux is, you can have a look to the <a href="http://redux.js.org/" target="_blank" rel="noopener">documentation here</a>.</p>
<p>Note2: All examples are based on ReactJS, but you can use exactly the same structure for a React-Native application.</p>
<h3 id="What-are-the-challenges-when-you-build-an-application"><a href="#What-are-the-challenges-when-you-build-an-application" class="headerlink" title="What are the challenges when you build an application?"></a>What are the challenges when you build an application?</h3><p>This has happened or will happen to pretty much all developers over the course of their career:</p>
<ul>
<li>You build an application for a client with a team of a few developers, everything works very well all together.</li>
<li>Your client requires new features, fine, you add them.</li>
<li>Your client asks you to remove some features and add new ones, it starts to get complicated, you didn’t think about that, but you make it work even though it’s not perfect.</li>
<li>Your client now wants you to change another feature, remove some others and add another one that wasn’t expected. At that point, you grab the scotch tape and start patching some code. You are not really proud of it but it works.</li>
<li>6 months later, after some other iterations, the code of the application gets really complicated to read and understand, everything looks like some Italian spaghetti pasta.</li>
</ul>
<p>Until the day your client decides to create a new version of the application, with some fresh new code and features. In some cases, you end-up keeping complicated legacy code that lives with the new code, and this becomes even harder to maintain. And all of this happened because your app wasn’t properly designed from the beginning.</p>
<hr>
<p>When I started to learn React, I found a few very good articles explaining how to create Todo lists or very simple games. Those articles were very useful to understand the basics of React, but I quickly got to a point where I wasn’t able to find much about how I could use React to build actual applications, something with a few dozens pages and hundreds of components.</p>
<p>After some research, I learned that every React boilerplate project on Github results to similar structures, they organize all the files by type. This might look familiar to you:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">  /actions</span><br><span class="line">    /notifications.js</span><br><span class="line"></span><br><span class="line"> /components </span><br><span class="line">    /Header</span><br><span class="line">    /Footer</span><br><span class="line">    /Notifications</span><br><span class="line">      /index.js</span><br><span class="line">  /containers</span><br><span class="line">    /Home</span><br><span class="line">    /Login</span><br><span class="line">    /Notifications</span><br><span class="line">      /index.js</span><br><span class="line"></span><br><span class="line">  /images</span><br><span class="line">    /logo.png</span><br><span class="line"></span><br><span class="line">  /reducers </span><br><span class="line">    /login.js</span><br><span class="line">    /notifications.js</span><br><span class="line"></span><br><span class="line">  /styles </span><br><span class="line">    /app.scss</span><br><span class="line">    /header.scss </span><br><span class="line">    /home.scss</span><br><span class="line">    /footer.scss</span><br><span class="line">    /notifications.scss</span><br><span class="line"></span><br><span class="line">  /utils</span><br><span class="line">  index.js</span><br></pre></td></tr></table></figure>
<p>This architecture might be okay to build your website or application, but I believe that it is not the best architecture.</p>
<p>When you organize your files by type, as your application grows, it often becomes difficult to maintain. By the time you realize this, it’s too late and you will have to invest a lot of time and money to change everything, or to support what you have for the next few years.</p>
<p>The good thing with React is that you can structure your application in any way you like. You are not forced to follow a certain folder structure, React is simply a javascript library.</p>
<h3 id="What-could-be-a-better-approach-to-organize-your-application"><a href="#What-could-be-a-better-approach-to-organize-your-application" class="headerlink" title="What could be a better approach to organize your application?"></a>What could be a better approach to organize your application?</h3><p>For a couple of years I worked for a financial institution which used Ember as their main javascript framework to build all their new web applications. One interesting thing about Ember is the ability to structure your project by features, instead of by type. And this changes everything.</p>
<p>Pods in Ember are great but still limited, and I wanted something much more flexible. After a few experiments, trying to find what would be the best structure, I got to a point where I decided to group all related features together, and nest them as needed. This is what I use now:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">  /components </span><br><span class="line">    /Button </span><br><span class="line">    /Notifications</span><br><span class="line">      /components</span><br><span class="line">        /ButtonDismiss  </span><br><span class="line">          /images</span><br><span class="line">          /locales</span><br><span class="line">          /specs </span><br><span class="line">          /index.js</span><br><span class="line">          /styles.scss</span><br><span class="line">      /index.js</span><br><span class="line">      /styles.scss</span><br><span class="line">  /scenes</span><br><span class="line">    /Home </span><br><span class="line">      /components </span><br><span class="line">        /ButtonLike</span><br><span class="line">      /services</span><br><span class="line">        /processData</span><br><span class="line">      /index.js</span><br><span class="line">      /styles.scss</span><br><span class="line"></span><br><span class="line">    /Sign </span><br><span class="line">      /components </span><br><span class="line">        /FormField</span><br><span class="line">      /scenes</span><br><span class="line">        /Login</span><br><span class="line">        /Register </span><br><span class="line">          /locales</span><br><span class="line">          /specs</span><br><span class="line">          /index.js</span><br><span class="line">          /styles.scss</span><br><span class="line"></span><br><span class="line">  /services</span><br><span class="line">    /api</span><br><span class="line">    /geolocation</span><br><span class="line">    /session</span><br><span class="line">      /actions.js</span><br><span class="line">      /index.js</span><br><span class="line">      /reducer.js</span><br><span class="line">    /users</span><br><span class="line">      /actions.js</span><br><span class="line">      /api.js</span><br><span class="line">      /reducer.js</span><br><span class="line">  index.js </span><br><span class="line">  store.js</span><br></pre></td></tr></table></figure>
<p>Each component, scene or service (a feature) has everything it needs to work on its own, such as its own styles, images, translations, set of actions as well as unit or integration tests. You can see a feature like an independent piece of code you will use in your app (a bit like <em>node modules</em>).</p>
<p>To work properly, they should follow these rules:</p>
<ul>
<li>A component can define nested components or services. It cannot use or define scenes.</li>
<li>A scene can define nested components, scenes or services.</li>
<li>A service can define nested services. It cannot use or define components or scenes.</li>
<li>Nested features can only use from its parent.</li>
</ul>
<p><em>Note: By parent feature, I mean a parent, grandparent, great-grandparent etc… You cannot use a feature that is a “cousin”, this is not allowed. You will need to move it to a parent to use it.</em></p>
<p>Let’s break this down.</p>
<h4 id="Components"><a href="#Components" class="headerlink" title="Components"></a><strong>Components</strong></h4><p>You all already know what a component is, but one important thing in this organization is the ability to nest a component into another component.</p>
<p>Components defined at the root level of your project, in the <em>components</em> folder, are global and can be used anywhere in your application. But if you decide to define a new component inside another component (nesting), this new component can only be used its direct parent.</p>
<p><strong>Why would you want to do that?</strong></p>
<p>When you develop a large application, it happens quite often that you need to create a component that you definitively know you won’t reuse anywhere else, but you need it. If you add it at the root level of your <em>components</em> folder, it will get lost with hundreds of components. Sure, you could categorize them, but when it’s time to do some clean-up, you won’t remember what they are all for or if they are still being used somewhere.</p>
<p>Although, if you define at the root level only the main components of your application, such as buttons, form fields, thumbnails, but also more complicated one like listComments, formComposer with their own children components, it gets much easier to find what you need.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">  /components</span><br><span class="line">    /Button</span><br><span class="line">      /index.js</span><br><span class="line">    /Notifications </span><br><span class="line">      /components </span><br><span class="line">        /ButtonDismiss </span><br><span class="line">          /index.js</span><br><span class="line">      /actions.js</span><br><span class="line">      /index.js</span><br><span class="line">      /reducer.js</span><br></pre></td></tr></table></figure>
<ul>
<li><em>Button</em> can be used anywhere in your application.</li>
<li><em>Notifications</em> can also be used anywhere. This component defines a component <em>ButtonDismiss.</em> You cannot use <em>ButtonDismiss</em> anywhere else than in the <em>Notifications</em> component.</li>
<li><em>ButtonDismiss</em> uses <em>Button</em> internally, this is authorized because <em>Button</em> is defined at the root level of <em>components</em>.</li>
</ul>
<h4 id="Scenes"><a href="#Scenes" class="headerlink" title="Scenes"></a><strong>Scenes</strong></h4><p>A scene is a page of your application. You can see a scene just like any component, but I like to separate them into their own folder.</p>
<p>If you use <a href="https://github.com/reactjs/react-router" target="_blank" rel="noopener">React-Router</a> or <a href="https://github.com/aksonov/react-native-router-flux" target="_blank" rel="noopener">React Native Router</a>, you can import all your scenes in your main index.js file and setup your routes.</p>
<p>With the same principle components can be nested, you can also nest a scene into a scene, and also define components or services into a scene. You have to remember that if you decide to define something into a scene, you can only use it within the scene folder itself.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">  /scenes</span><br><span class="line">    /Home </span><br><span class="line">      /components</span><br><span class="line">        /ButtonShare</span><br><span class="line">          /index.js</span><br><span class="line">      /index.js</span><br><span class="line"></span><br><span class="line">    /Sign</span><br><span class="line">      /components</span><br><span class="line">        /ButtonHelp</span><br><span class="line">          /index.js</span><br><span class="line"></span><br><span class="line">      /scenes</span><br><span class="line">        /Login</span><br><span class="line">          /components </span><br><span class="line">            /Form</span><br><span class="line">              /index.js</span><br><span class="line">            /ButtonFacebookLogin</span><br><span class="line">              /index.js</span><br><span class="line">          /index.js</span><br><span class="line"></span><br><span class="line">        /Register</span><br><span class="line">          /index.js</span><br><span class="line">      /index.js</span><br></pre></td></tr></table></figure>
<ul>
<li><em>Home</em> has a component <em>ButtonShare</em>, it can only be used by the Home scene.</li>
<li><em>Sign</em> has a component <em>ButtonHelp</em>. This component can be used by <em>Login</em> or <em>Register</em> scenes, or by any components defined in those scenes.</li>
<li><em>Form</em> component uses <em>ButtonHelp</em> internally, this is authorized because <em>ButtonHelp</em> is defined by a parent.</li>
<li>The <em>Register</em> scene cannot use any of the components defined in <em>Login</em>, but it can use the <em>ButtonHelp.</em></li>
</ul>
<h4 id="Services"><a href="#Services" class="headerlink" title="Services"></a><strong>Services</strong></h4><p>Not everything can be a component, and you will need to create independent modules that can be used by your components or scenes.</p>
<p>You can see a service like a self-contained module where you will define the core business logic of your application. This can eventually be shared between several scenes or even applications, such as a web and native version of you app.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/src</span><br><span class="line">  /services</span><br><span class="line">    /api</span><br><span class="line">      /services</span><br><span class="line">        /handleError</span><br><span class="line">          /index.js</span><br><span class="line">      /index.js    /geolocation </span><br><span class="line">    /session </span><br><span class="line">      /actions.js</span><br><span class="line">      /index.js</span><br><span class="line">      /reducer.js</span><br></pre></td></tr></table></figure>
<p>I recommend you to create services to manage all api requests. You can see them as a bridge/an adapter between the server API and the view layer (scenes and components) of your application. It can take care of network calls your app will make, get and post content, and transform payloads as needed before being sent or saved in the store of your app (such as Redux). The scenes and components will only dispatch actions, read the store and update themselves based on the new changes.</p>
<hr>
<h3 id="Wrapping-up"><a href="#Wrapping-up" class="headerlink" title="Wrapping up"></a>Wrapping up</h3><p>I’ve been working with this architecture for the past few months on a personal project built with React-Native, and I can tell you this saved me a lot of time. It’s much more simpler to have all related entities grouped together, it makes things easier to work with.</p>
<p>This architecture is one of many other ways to organize your project, that’s the way I like it now and I hope this will help you improve yours!</p>
<p>If you are interested to see working projects, I have a few on my Github account that follows this architecture:</p>
<ul>
<li><a href="https://github.com/alexmngn/react-rock-paper-scissors" target="_blank" rel="noopener">https://github.com/alexmngn/react-rock-paper-scissors</a> (ReactJS)</li>
<li><a href="https://github.com/alexmngn/react-native-authentication" target="_blank" rel="noopener">https://github.com/alexmngn/react-native-authentication</a> (React-Native)</li>
</ul>
<p>Feel free to add a comment below or contact me directly if you have any question, I’ll be more than happy to help.</p>
<p>Have fun!</p>
<span>Source: </span><a href="https://medium.com/@alexmngn/how-to-better-organize-your-react-applications-2fd3ea1920f1" target="_blank" title="https://medium.com/@alexmngn/how-to-better-organize-your-react-applications-2fd3ea1920f1" class="post-from">https://medium.com/@alexmngn/how-to-better-organize-your-react-applications-2fd3ea1920f1</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2017/11/Cach-chinh-xac-100-de-cau-truc-ung-dung-React.html" class="prev">NEXT</a><a href="/2017/11/Lam-the-nao-de-cau-truc-cac-components-trong-React.html" class="next">PREV</a></div><div class="copyright"><p>© 2017 - 2019 <a href="http://nthung2112.github.io">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41935289-1",'auto');ga('send','pageview');</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Làm thế nào để kết hợp NodeJS Back End với ReactJS Front End · Learn and Share</title><meta name="description" content="Làm thế nào để kết hợp NodeJS Back End với ReactJS Front End - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Làm thế nào để kết hợp NodeJS Back End với ReactJS Front End"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1600/1*-NOQtyJAGQ1RNC3iVt_thA.png"><meta property="og:description" content="In this post, I want to show how you can build the front and back end of a website using NodeJS for the back end. We’ll use node to create endpoints, and set up a database in JSON format. Then, we’ll create a front end application using React that will post to the database, and also fetch data from it."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Làm thế nào để kết hợp NodeJS Back End với ReactJS Front End</h1><h2 class="post-subtitle"></h2><header class="post-info">Nov 4, 2017<div class="tags"><a href="/tags/react" class="tag-link">#react</a><a href="/tags/nodejs" class="tag-link">#nodejs</a></div><div class="fb-ir-time"><time dateTime="2017-11-04T16:34:28.000Z" class="op-modified"></time><time dateTime="2017-11-04T16:34:28.000Z" class="op-published"></time></div></header></div><div class="post-banner"><img src="https://cdn-images-1.medium.com/max/1600/1*-NOQtyJAGQ1RNC3iVt_thA.png"></div><div class="wrap"><div class="post-content"><hr>
<p>In this post, I want to show how you can build the front and back end of a website using NodeJS for the back end. We’ll use node to create endpoints, and set up a database in JSON format. Then, we’ll create a front end application using React that will post to the database, and also fetch data from it.<br><a id="more"></a><br>For this example, I’ll be making a guestbook, where users can submit their names and leave messages. Because users won’t need to log in, or retrieve any data, I won’t need to store anything in a session. Here’s the way this will likely work:</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*1jc_PHELP7D04nUsZb3zmQ.png" alt=""></p>
<p>Basically, we will have this all one one page, with a form for submitting a message, alongside the actual guestbook. To make this work we’’ll start by creating the endpoints for our POST and GET requests. We’ll set up our database, deploy it, so that we can create a React app, and pull data from the online API.</p>
<p>Here’s the order in which I like to do things. You may prefer to work differently. This process makes sense to me, because each step builds on the step before it. During this tutorial, I’ll go through each step in more detail.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*AzwpcG8i0GA3mxmHMenLeQ.png" alt=""></p>
<p>To see how the finished project could work, here’s a link to my project:</p>
<p><a href="http://ethan.jarrell.webdeveloper.surge.sh/GuestBook" target="_blank" rel="noopener">http://ethan.jarrell.webdeveloper.surge.sh/GuestBook</a></p>
<h3 id="STEP-1"><a href="#STEP-1" class="headerlink" title="STEP 1 -"></a>STEP 1 -</h3><p>Our database collection will contain 2 items:</p>
<ol>
<li>The name of the user</li>
<li>The message the user writes</li>
</ol>
<p>If you haven’t already done so, go ahead and install MongoDB, and get it running on port 27017. Then, on the command line, we’ll create the database.</p>
<p>We’ll call our database signatures. And the collection, guest_signatures.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; Show dbs</span><br><span class="line">&gt; Use signatures</span><br><span class="line">switched to db signatures</span><br><span class="line">&gt; show collections</span><br><span class="line">&gt; db.createCollection(guest_signatures)</span><br></pre></td></tr></table></figure>
<p>Now that we have that set up, we can switch to the text editor, and create the models for the database.</p>
<h3 id="STEP-2"><a href="#STEP-2" class="headerlink" title="STEP 2 -"></a>STEP 2 -</h3><p>Use the command line to start a new express app. Make the new directory, and then use npm init to create the app. This will automatically create your pkg.JSON file.</p>
<p>Since this will be a very basic app, we’ll only need 2 other files in our express app. One for our routes. I like to include all my dependencies in this file as well. Then our second fill will be for our models/schema. We’ll tackle the model file first. It should look something like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">let</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> signatureSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  guestSignature: &#123;</span><br><span class="line">    type: mongoose.Schema.Types.Mixed,</span><br><span class="line">    required: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  message: &#123;</span><br><span class="line">    type: mongoose.Schema.Types.Mixed,</span><br><span class="line">    required: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Signature = mongoose.model(<span class="string">'Signature'</span>, signatureSchema);</span><br><span class="line"><span class="built_in">module</span>.exports = Signature;</span><br></pre></td></tr></table></figure>
<h3 id="STEP-3"><a href="#STEP-3" class="headerlink" title="STEP 3 -"></a>STEP 3 -</h3><p>Before we create our endpoints here, let’s go ahead an list our dependencies at the top of our file. We don’t need too many.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//====LIST DEPENDENCIES===//</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> parseurl = <span class="built_in">require</span>(<span class="string">'parseurl'</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> expressValidator = <span class="built_in">require</span>(<span class="string">'express-validator'</span>);</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> Signature = <span class="built_in">require</span>(<span class="string">'./models/signature.js'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> url = <span class="string">'mongodb://localhost:27017/signatures'</span>;</span><br><span class="line"><span class="comment">//=========================//</span></span><br></pre></td></tr></table></figure>
<p>You don’t necessarily need to connect with mongoose, so feel free to use MongoClient, if you prefer that. We’re also using the Signature schema that we just created in the previous step.</p>
<p>Now, let’s create our endpoints. We only have one model, and we’re only going to read and write to it for now, so we’re only going to have 2 endpoints.</p>
<ol>
<li>Our root directory “/”, where we’ll redirect to our API</li>
<li>Our api, we’ll call “/api/signatures, where we’ll read and write to.</li>
</ol>
<p>At our API endpoint, we’ll have a GET and a POST. We’ll reference our models, using the find() and create() methods for GET and POST respectively. And our response will need to be in JSON format, so that we can easily access the data there from React later on. Here’s how those endpoints might look:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//====ROOT DIRECTORY===//</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.json(<span class="string">'you did it'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//==========================//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//====GET ALL SIGNATURES===//</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/api/signatures'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Signature.find(&#123;&#125;).then(<span class="function"><span class="params">eachOne</span> =&gt;</span> &#123;</span><br><span class="line">    res.json(eachOne);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//==========================//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//====POST NEW SIGNATURE===//</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/api/signatures'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  Signature.create(&#123;</span><br><span class="line">    guestSignature: req.body.SignatureOfGuest,</span><br><span class="line">    message: req.body.MessageofGuest,</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">signature</span> =&gt;</span> &#123;</span><br><span class="line">    res.json(signature)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//==========================//</span></span><br></pre></td></tr></table></figure>
<p>The only thing I didn’t really mention was the req.body.SignatureOfGuest and req.body.MessageofGuest. Everything else in this section refers to something we’ve already created, like our database, collections and models. This refers to the name of the field that we’ll use in our React App, Our input will have to use the names SignatureOfGuest and MessageofGuest, so we’ll need to remember that.</p>
<h3 id="STEP-4"><a href="#STEP-4" class="headerlink" title="STEP 4 -"></a>STEP 4 -</h3><p>Now, we’ll want to connect to our local database from out text editor. If you remember, we had this constant in our list:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">'mongodb://localhost:27017/signatures'</span>;</span><br></pre></td></tr></table></figure>
<p>We’ll write a function using this constant to connect to our local database.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//====MONGOOSE CONNECT===//</span></span><br><span class="line">mongoose.connect(url, <span class="function"><span class="keyword">function</span> (<span class="params">err, db</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (err) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'Unable to connect to the mongoDB server. Error:'</span>, err);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'Connection established to'</span>, url);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//==========================//</span></span><br></pre></td></tr></table></figure>
<p>In order to make sure everything is working properly, we’ll also need to add an app.listen at the end of our file.</p>
<p>At this point, it’s a good idea to pause, and make sure the endpoints and local connection works. You can do that by using Postman to make GET and POST requests. If the endpoints or connections don’t work, you should be able to diagnose the problem here based on the error messages you receive. If everything is working, it should allow you to appropriately read and write to the database.</p>
<p>Once everything is working, it’s time to set up our account on Heroku and Mlab.</p>
<h3 id="STEP-5"><a href="#STEP-5" class="headerlink" title="STEP 5-"></a>STEP 5-</h3><p>Sign up for a Heroku account <a href="https://signup.heroku.com/" target="_blank" rel="noopener">here</a>. And create an mLab account <a href="https://mlab.com/signup/" target="_blank" rel="noopener">here</a>.</p>
<h3 id="STEP-6"><a href="#STEP-6" class="headerlink" title="STEP 6 -"></a>STEP 6 -</h3><ol>
<li>After creating your mLab account, click on the Create New button and select a Single node sandbox. There are paid options as well, but the sandbox has plenty of space for getting started. Give your database a name. Since my local database is signatures, I’m using the same name for my mLab database.</li>
<li>Now that you have your database created, you can start a new collection from here.</li>
<li>You will also need to add a User or Users who can access your database. Without doing this step, and adding yourself as a User with access, authentication will always fail when you try to deploy it.</li>
</ol>
<p>Now your database is running on mLab. When you click on the database, you should see some information at the top, telling you how to integrate the connection. It should look something like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb:<span class="comment">//&lt;dbuser&gt;:&lt;dbpassword&gt;[@ds7](http://twitter.com/ds129024 "Twitter profile for @ds129024")9234.mlab.com:9234/signatures</span></span><br></pre></td></tr></table></figure>
<p>The actual url of the database will just have the username and password replaced with your username and password.</p>
<p>Now let’s head back to our text editor. We currently have the database running locally at this location:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">'mongodb://localhost:27017/signatures'</span>;</span><br></pre></td></tr></table></figure>
<p>To change it, so that we are connected to mLab, simply update the url variable with the information from mLab. It should look something like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="string">'mongodb://username:password@ds79234.mlab.com:9234/signatures'</span>;</span><br></pre></td></tr></table></figure>
<p>However, you’ll likely be putting this on github, or another public place. You don’t want your mlab username and password in a public sphere where anyone can see it. To fix that, we’ll set an environment variable on the command line, and then update our url variable one more time in the text editor. On the command line, use this command:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> MONGOLAB_URI=<span class="string">"mongodb://username:password@ds79234.mlab.com:9234/signatures';</span></span><br></pre></td></tr></table></figure>
<p>Of course, replacing it with your own username, password, numbers and database name. Now, back in our text editor, we will change our url variable to the following:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = process.env.MONGOLAB_URI;</span><br></pre></td></tr></table></figure>
<p>We’ll also want to change our app.listen to reflect the new port. It could look like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.listen(process.env.PORT || <span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'starting applicaiton.  Good job!'</span>);</span><br></pre></td></tr></table></figure>
<p>This way, it will try to run from mongolab, but if it can’t make the connection, it will still listen on port 3000 by default. This will also allow you to run the app locally or from mlab, in case you want to test changes on the local version.</p>
<p>The final step in making the connection is deploying your code to your Heroku App. to do this, you can use the following code from the command line:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heroku config:set MONGOLAB_URI=mongodb:<span class="comment">//username:password@ds79234.mlab.com:9234/signatures</span></span><br></pre></td></tr></table></figure>
<p>Your app should be successfully deployed on heroku, and you can open it from there now. If you are getting errors, double check to make sure it’s running locally. If so, then it’s probably an error along the way in the connection.</p>
<p>In these last two steps, there’s quite a bit of repetitive code. I’m going to outline the high level code here.</p>
<h3 id="STEP-7"><a href="#STEP-7" class="headerlink" title="STEP 7 -"></a>STEP 7 -</h3><p>Use ‘create-react-app’ from the command line to create a new react app.</p>
<h3 id="STEP-8"><a href="#STEP-8" class="headerlink" title="STEP 8 -"></a>STEP 8 -</h3><p>Now, we’ll want to create a form, to allow for user input. Here’s how we do that.</p>
<ol>
<li>In a new component, we’ll create a new class.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuestBook</span> <span class="keyword">extends</span> <span class="title">Component</span></span></span><br></pre></td></tr></table></figure>
<p>2. We’ll use a constructor and super method to pass props down.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br></pre></td></tr></table></figure>
<p>3. Use the this keyword to handle the name and message of guest, and bind it to (this).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.handleSignatureOfGuest = <span class="keyword">this</span>.handleSignatureOfGuest.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.handleMessageofGuest = <span class="keyword">this</span>.handleMessageofGuest.bind(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p>4. Set the state of the name and message of guest to an empty string.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">      SignatureOfGuest: <span class="string">""</span>,</span><br><span class="line">      MessageofGuest: <span class="string">""</span>,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>5. Listen for an event on the state of both the name and message input.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">handleSignatureOfGuest(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">SignatureOfGuest</span>: event.target.value &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleMessageofGuest(event) &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123; <span class="attr">MessageofGuest</span>: event.target.value &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>6. Create a function that changes the name and message to the value of the target input.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addToGuestBook = <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      SignatureOfGuest: event.target.value,</span><br><span class="line">      MessageofGuest: event.target.value,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>7. I’m now using axios to post the input data to our database, which is on heroku.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'&lt;[your-heroku-url here&gt;'</span>](https:<span class="comment">//ancient-sea-87841.herokuapp.com/api/signatures%27), &#123;</span></span><br><span class="line">        SignatureOfGuest: <span class="keyword">this</span>.state.SignatureOfGuest,</span><br><span class="line">        MessageofGuest: <span class="keyword">this</span>.state.MessageofGuest,</span><br><span class="line">      &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(response, <span class="string">'Signature added!'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err, <span class="string">'Signature not added, try again'</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>8. Then I’m resetting the state of the input to an empty string.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      SignatureOfGuest: <span class="string">""</span>,</span><br><span class="line">      MessageofGuest: <span class="string">""</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>9. Finally, we’ll make a render method, and return our page with the input fields. Inside the input of each field, we’ll give it an onChange, name, and value. the onChange will be set to the.handlemessage or this.handlename, for each field. The name of each field will be set to what we called it in our node app. The value will use state, and we’ll set that to this.state.message, and this.state.name.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">           onChange=&#123;<span class="keyword">this</span>.handleSignatureOfGuest&#125;</span><br><span class="line">           name=<span class="string">"SignatureOfGuest"</span></span><br><span class="line">           className=<span class="string">"NameinputForm"</span></span><br><span class="line">           value=&#123;<span class="keyword">this</span>.state.SignatureOfGuest&#125;</span><br><span class="line">           placeholder=<span class="string">"Enter your name"</span></span><br><span class="line">            /&gt;</span><br><span class="line">  &lt;textarea</span><br><span class="line">              onChange=&#123;<span class="keyword">this</span>.handleMessageofGuest&#125;</span><br><span class="line">              name=<span class="string">"MessageofGuest"</span></span><br><span class="line">              className=<span class="string">"MessageinputForm"</span></span><br><span class="line">              value=&#123;<span class="keyword">this</span>.state.MessageofGuest&#125;</span><br><span class="line">              placeholder=<span class="string">"Type a message"</span></span><br><span class="line">               /&gt;</span><br></pre></td></tr></table></figure>
<p>10. Then we’ll add a submit button, where we call the function from earlier.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button</span><br><span class="line">            className=<span class="string">"submitbuttonguestbook"</span></span><br><span class="line">            type=<span class="string">"submit"</span></span><br><span class="line">            onClick=&#123;<span class="keyword">this</span>.addToGuestBook&#125;</span><br><span class="line">              &gt;</span><br><span class="line">            Submit to Guestbook&lt;i className=<span class="string">"GuestBookButton2"</span> aria-hidden=<span class="string">"true"</span> /&gt;</span><br><span class="line">            &lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="STEP-9"><a href="#STEP-9" class="headerlink" title="STEP 9-"></a>STEP 9-</h3><p>Now we’ll make another component where we’ll render the data that’s being stored in our database. Then we can export that component, and put it on our guestbook page.</p>
<p>Inside this component we’ll do the following:</p>
<ol>
<li>In a new component, we’ll create a new class.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuestNames</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>2. We’ll use a constructor and super method to pass props down.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br></pre></td></tr></table></figure>
<p>3. Use this.state to set the state of our guestbook messages to an empty string.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.state = &#123;</span><br><span class="line">      messages: <span class="string">""</span>,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>4. Use a componentDidMount lifecycle method</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br></pre></td></tr></table></figure>
<p>5. Inside that method we’ll use fetch and the url of our heroku api to fetch the information from the database.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'&lt;your-heroku-url-goes-here&gt;['</span>](https:<span class="comment">//ancient-sea-87841.herokuapp.com/api/signatures%27))</span></span><br><span class="line">    .then(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> results.json();</span><br></pre></td></tr></table></figure>
<p>6. We’ll map over the data, and return the data we want.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data.map(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">          &lt;div key=&#123;msg.results&#125;&gt;</span><br><span class="line">            &lt;h3 className=<span class="string">"h3msg"</span>&gt;&#123;msg.message&#125;&lt;<span class="regexp">/h3&gt;&lt;h2 className="h2sig"&gt;-&#123;msg.guestSignature&#125;&lt;/</span>h2&gt;</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>7. Now we’ll use this.setState to set the state of the messages to the new state using the data we just fetched.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(&#123;<span class="attr">messages</span>: messages&#125;);</span><br></pre></td></tr></table></figure>
<p>8. Now we’ll create render mehod.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br></pre></td></tr></table></figure>
<p>9. Inside the render method, we’ll create JSX elements to render our data inside the component. I’m using this.state.messages inside an <code>&lt;h6&gt;</code> tag.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"guestdataContainer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">h6</span>&gt;</span>Guestbook Messages<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span></span><br><span class="line"><span class="xml">          &#123;this.state.messages&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>10. Finally, we’ll export the component, so we can use it on other pages.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> GuestNames;</span><br></pre></td></tr></table></figure>
<p>Again, if you have any questions feel free to reach out. Thanks!</p>
<span>Source: </span><a href="https://hackernoon.com/how-to-combine-a-nodejs-back-end-with-a-reactjs-front-end-app-ea9b24715032" target="_blank" title="https://hackernoon.com/how-to-combine-a-nodejs-back-end-with-a-reactjs-front-end-app-ea9b24715032" class="post-from">https://hackernoon.com/how-to-combine-a-nodejs-back-end-with-a-reactjs-front-end-app-ea9b24715032</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2017/11/Huong-dan-xay-dung-ung-dung-React-Redux-CRUD.html" class="prev">NEXT</a><a href="/2017/11/Tong-hop-cac-cheatsheets-tot-nhat-cua-Front-end.html" class="next">PREV</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'nthung2112';
var disqus_identifier = '2017/11/Lam-the-nao-de-ket-hop-NodeJS-Back-End-voi-ReactJS-Front-End.html';
var disqus_title = 'Làm thế nào để kết hợp NodeJS Back End với ReactJS Front End';
var disqus_url = 'http://nth-blogs.herokuapp.com/2017/11/Lam-the-nao-de-ket-hop-NodeJS-Back-End-voi-ReactJS-Front-End.html';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//nthung2112.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 - 2018 <a href="http://nth-blogs.herokuapp.com">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>
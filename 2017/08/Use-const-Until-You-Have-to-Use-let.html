<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Use const Until You Have to Use let ¬∑ Learn and Share</title><meta name="description" content="Use const Until You Have to Use let - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Use const Until You Have to Use let"><meta property="og:image"><meta property="og:description" content="Aloha, web surfer. So perhaps you‚Äôre a let fan who came here to see what was up. Or maybe you‚Äôre a beginner, just moving out of var town and into the wild west that is ES6 variable declaration. Whatever your experience level may be, I hope this article provides valuable insights and leaves you with a solid rule of thumb for instantiating variables in Javascript. My other hope is that, upon finishing this article, you can confidently part ways with var ‚Äì it is time."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Use const Until You Have to Use let</h1><h2 class="post-subtitle"></h2><header class="post-info">Aug 21, 2017<div class="tags"><a href="/tags/javascript" class="tag-link">#javascript</a><a href="/tags/es6" class="tag-link">#es6</a></div><div class="fb-ir-time"><time datetime="2017-08-21T11:44:18.000Z" class="op-modified"></time><time datetime="2017-08-21T11:44:18.000Z" class="op-published"></time></div></header></div><div class="wrap"><div class="post-content"><p>Aloha, web surfer. So perhaps you‚Äôre a <code>let</code> fan who came here to see what was up. Or maybe you‚Äôre a beginner, just moving out of <code>var</code> town and into the wild west that is ES6 variable declaration. Whatever your experience level may be, I hope this article provides valuable insights and leaves you with a solid rule of thumb for instantiating variables in Javascript. My other hope is that, upon finishing this article, you can confidently part ways with <code>var</code> ‚Äì it is time.<br><a id="more"></a></p>
<h3 id="Once-Upon-A-Time‚Ä¶"><a href="#Once-Upon-A-Time‚Ä¶" class="headerlink" title="Once Upon A Time‚Ä¶"></a>Once Upon A Time‚Ä¶</h3><p>‚Ä¶in a specification authored somewhere in California‚Ä¶</p>
<p>‚Ä¶a keyword for variable instantiation was created and called <code>var</code>.</p>
<p>If you remember your first day learning Javascript, it probably involved <code>var</code>. This little keyword was our only option for declaring variables in Javascript for a long time. In fact, every web site and application that used Javascript between it‚Äôs inception in 1995 and the release of ECMAScript 2015 (ES6) used <code>var</code> and only <code>var</code> to create variables. (Someone fact check me on this statement, but I think it‚Äôs accurate.)</p>
<p>The <code>var</code> keyword is no longer relevant, but in order to truly understand our present, we must understand our past.</p>
<p>Some important things to know about variables created with the <code>var</code> keyword:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1) They are function scoped</span><br><span class="line">2) Their declarations get hoisted</span><br><span class="line">3) They can be declared without a value</span><br></pre></td></tr></table></figure>
<h4 id="1-‚ÄúThey-are-function-scoped‚Äù"><a href="#1-‚ÄúThey-are-function-scoped‚Äù" class="headerlink" title="1 ‚ÄúThey are function scoped‚Äù"></a>1 ‚ÄúThey are function scoped‚Äù</h4><p>This means that <code>var</code> creates a variable that only exists inside of the function where it was declared.</p>
<p><em>(Unless it was not declared inside a function. In that case, it exists ~everywhere~ üò≤. More on this in fact #3.)</em></p>
<p>Here‚Äôs a code snippet that illustrates the behavior of a function scoped variable:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// inside of `logA()`, `a` exists with value 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// ReferenceError! Outside of logA(), `a` is not defined.</span></span><br></pre></td></tr></table></figure>
<p>I think it‚Äôs worth clarifying that when I say ‚Äúinside of‚Äù <code>logA()</code>, I mean ‚Äúbetween <code>logA()</code>‚Äôs curly brackets‚Äù.</p>
<h4 id="2-‚ÄúTheir-declarations-get-hoisted‚Äù-üèã"><a href="#2-‚ÄúTheir-declarations-get-hoisted‚Äù-üèã" class="headerlink" title="2 ‚ÄúTheir declarations get hoisted‚Äù üèã"></a>2 ‚ÄúTheir declarations get hoisted‚Äù üèã</h4><p>Variable hoisting basically boils down to the fact that a variable declared with <code>var</code> can be instantiated <em>after</em> it gets used.</p>
<p>This code‚Ä¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  b = <span class="number">2</span>; <span class="comment">// using b to hold the number 2</span></span><br><span class="line">  <span class="built_in">console</span>.log(b); <span class="comment">// using b to print 2 in the console</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> b; <span class="comment">// instantiating b ü§î</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‚Ä¶will get transformed into something like this code‚Ä¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b; <span class="comment">// instantiation is hoisted to the top of logB()'s scope</span></span><br><span class="line"></span><br><span class="line">  b = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‚Ä¶at <em>compile</em> time (yes, <a href="https://github.com/getify/You-Dont-Know-JS/blob/31e1d4ff600d88cc2ce243903ab8a3a9d15cce15/scope%20%26%20closures/ch1.md" target="_blank" rel="noopener">Javascript gets compiled</a>). That‚Äôs why it doesn‚Äôt matter (to the browser) where we instantiate our variables ‚Äì the declarations get to skip the line every time.</p>
<p>There‚Äôs a dark side to the way <code>var</code> gets hoisted, though. Javascript‚Äôs compiler can be a bit <em>too</em> helpful in some situations.</p>
<p>If we use a variable within a function but don‚Äôt instantiate the variable in that function, the compiler will look for a <code>var</code> in the parent function scope. If it doesn‚Äôt find it there, it will keep looking all the way up the scope chain until it gets to the <em>global</em> scope. If it <em>still</em> doesn‚Äôt see a <code>var</code> declaration up there, it will just go ahead and <em>make one for you</em>, as demonstrated in this snippet:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logC</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  c = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(c); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// c is not instantiated in this program, yet it just works...</span></span><br></pre></td></tr></table></figure>
<p>Yikes.</p>
<p>I guess this could be convenient sometimes when messing around in a REPL or something‚Ä¶</p>
<p>But for the most part, this is bananas. <code>&quot;use strict&quot;;</code> prevents this and should be included at the top of any ES5 script.</p>
<h4 id="3-‚ÄúThey-can-be-declared-without-a-value‚Äù"><a href="#3-‚ÄúThey-can-be-declared-without-a-value‚Äù" class="headerlink" title="3 ‚ÄúThey can be declared without a value‚Äù"></a>3 ‚ÄúThey can be declared without a value‚Äù</h4><p>You may have seen someone do something along these lines before:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// declare all my variables at the top of the script</span></span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line"></span><br><span class="line"><span class="comment">// use them down here</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">b = <span class="number">2</span>;</span><br><span class="line">c = a + b;</span><br></pre></td></tr></table></figure>
<p>Put a pin in this because it becomes important later.</p>
<h3 id="Times-Have-Changed"><a href="#Times-Have-Changed" class="headerlink" title="Times Have Changed"></a>Times Have Changed</h3><p>The three facets of <code>var</code> that I just covered come together to create an extremely flexible variable declaration mechanism. While flexibility itself is not a bad thing and having only one variable instantiation keyword means a little more flexibility is necessary, <code>var</code> is simply doing too much. Function scope isn‚Äôt a problem, but reassigning variables is so-so and should only be used for <code>for</code> loops and times when it‚Äôs completely unavoidable (and when it‚Äôs unavoidable, it probably means we have bigger fish to fry). The same goes for declaring variables without values. Lastly, being allowed to use a variable whether we declared it or not is silly.</p>
<p>So, in order to address these drawbacks of <code>var</code> and save us developers from the pitfalls these ‚Äúhelpful‚Äù features can cause, the ES6 specification introduced two new variable keywords: <code>const</code> and <code>let</code>.</p>
<p>Remember, the primary goal of this post is to show that it‚Äôs time to ditch <code>var</code>. Times have changed and <code>var</code> doesn‚Äôt make the cut.</p>
<h3 id="Let-me-explain‚Ä¶"><a href="#Let-me-explain‚Ä¶" class="headerlink" title="Let me explain‚Ä¶"></a>Let me explain‚Ä¶</h3><p>In 2015, Javascript‚Äôs variable declaration family grew to include <code>let</code>, which deviates significantly from <code>var</code> in that it is <em>block</em> scoped. This basically means that we now have two units of scope available:</p>
<h4 id="1-Functions"><a href="#1-Functions" class="headerlink" title="1 Functions"></a>1 Functions</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">'aye'</span>; <span class="comment">// `i` is scoped to this function</span></span><br><span class="line">  <span class="built_in">console</span>.log(i); <span class="comment">// "aye"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>
<h4 id="2-Blocks"><a href="#2-Blocks" class="headerlink" title="2 Blocks"></a>2 Blocks</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">'oi'</span>; <span class="comment">// `i` is scoped to this block</span></span><br><span class="line">  <span class="built_in">console</span>.log(i); <span class="comment">// "oi"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>
<p>The <code>let</code> keyword has another helpful constraint: the variable cannot be accessed <em>before</em> its declaration (<code>let</code> <a href="https://stackoverflow.com/questions/31219420/are-variables-declared-with-let-or-const-not-hoisted-in-es6" target="_blank" rel="noopener">does get hoisted</a> though).</p>
<p>One thing <code>let</code> shares with <code>var</code> is that it can be used to declare a variable without an initial value. Like in the example above, we could have done</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> i;</span><br><span class="line">  i = <span class="string">'oi'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and it would‚Äôve worked.</p>
<h4 id="Bookmarks-for-let-üëì"><a href="#Bookmarks-for-let-üëì" class="headerlink" title="Bookmarks for let üëì"></a>Bookmarks for <code>let</code> üëì</h4><ul>
<li><a href="https://stackoverflow.com/questions/31219420/are-variables-declared-with-let-or-const-not-hoisted-in-es6" target="_blank" rel="noopener">Are Let / Const Hoisted?</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20%26%20closures/ch3.md#blocks-as-scopes" target="_blank" rel="noopener">YDKJS Blocks As Scopes</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20%26%20closures/ch3.md#let" target="_blank" rel="noopener">YDKJS Let</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20%26%20closures/ch3.md#garbage-collection" target="_blank" rel="noopener">YDKJS Garbage Collection</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20%26%20closures/ch3.md#let-loops" target="_blank" rel="noopener">YDKJS Let loops</a></li>
</ul>
<h3 id="Const-stop-won‚Äôt-stop"><a href="#Const-stop-won‚Äôt-stop" class="headerlink" title="Const stop, won‚Äôt stop"></a>Const stop, won‚Äôt stop</h3><p>Okay, <code>const</code> is my favorite variable declaration keyword in Javascript. I default to <code>const</code> over <code>let</code> and never use <code>var</code>. As a rule, I always use <code>const</code> unless I <em>have</em> to use <code>let</code>.</p>
<p>Remember how variables declared with <code>var</code> can be instantiated with empty values? This type of instantiation is allowed with <code>let</code>, too. It is not so with <code>const</code>. Oh no, <code>const</code> requires that you provide a value up front. Otherwise, it will turn its nose up at you and refuse to create a variable, <em>‚ÄúIf you don‚Äôt know what‚Äôs going in the variable, monsieur/madame, then why do you need it at all?‚Äù</em> ‚Äì this is good.</p>
<p>But there‚Äôs more! <code>const</code> goes one step further and ensures that the variable cannot be reassigned [<strong>note:</strong> this does not mean the variable is <em>immutable</em>]. For example,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="string">'ay'</span>;</span><br><span class="line">a = <span class="number">2</span>; <span class="comment">// TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>
<p>Comparing <code>const</code> to <code>var</code>:</p>
<p>1 <code>const</code> is block scoped, <code>var</code> is function scoped. 2 <code>const</code> has to be instantiated <em>with</em> a value, <code>var</code> does not 3 <code>const</code> cannot be reassigned, <code>var</code> can 4 <code>const</code> cannot be accessed prior to instantiation, <code>var</code> can</p>
<p>So basically <code>const</code> is the strictest variable instantiation tool we have at our disposal. The constraints it provides protect us from several possible errors, making the development process smoother.</p>
<h3 id="Exceptions-When-to-use-let"><a href="#Exceptions-When-to-use-let" class="headerlink" title="Exceptions: When to use let"></a>Exceptions: When to use <code>let</code></h3><p>While I recommend defaulting to <code>const</code>, some situations demand the use of <code>let</code>.</p>
<p>Here is a quote by Eric Elliot from a <a href="https://medium.com/javascript-scene/javascript-es6-var-let-or-const-ba58b8dcde75" target="_blank" rel="noopener">great article</a> he wrote about the three keywords:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`let`</span>, is a signal that the variable may be reassigned, such <span class="keyword">as</span> a counter <span class="keyword">in</span> a loop, or a value swap <span class="keyword">in</span> an algorithm. It also signals that the variable will be used only <span class="keyword">in</span> the block it‚Äôs defined <span class="keyword">in</span>, which is not always the entire containing <span class="function"><span class="keyword">function</span>.</span></span><br></pre></td></tr></table></figure>
<p>In other words, <code>for</code> loops and mathematical algorithms are the only times we would need to reach for <code>let</code>. Other than that, <code>const</code> is the strongest, safest bet.</p>
<h3 id="Use-const-until-you-have-to-use-let"><a href="#Use-const-until-you-have-to-use-let" class="headerlink" title="Use const until you have to use let"></a>Use const until you have to use let</h3><p>I hope this article helped you on your quest to understand <code>let</code> and <code>const</code> and how they differ from <code>var</code>. I also hope you can comfortably ditch <code>var</code> and use <code>const</code> until you have to use <code>let</code>. I‚Äôm still learning myself and there are certainly gaps in this article. Feel free to correct me when I‚Äôm wrong or bring missing information to light.</p>
<span>Source: </span><a href="http://www.vincecampanale.com/blog/2017/06/22/const-or-let/" target="_blank" title="http://www.vincecampanale.com/blog/2017/06/22/const-or-let/" class="post-from">http://www.vincecampanale.com/blog/2017/06/22/const-or-let/</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2017/08/Optimizing-React-Apps-in-Practice.html" class="prev">NEXT</a><a href="/2017/08/How-to-use-Memoize-to-cache-JavaScript-function-results.html" class="next">PREV</a></div><div class="copyright"><p>¬© 2017 - 2018 <a href="http://nthung2112.github.io">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41935289-1",'auto');ga('send','pageview');</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Our Best Practices for Writing React Components · Learn and Share</title><meta name="description" content="Our Best Practices for Writing React Components - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Our Best Practices for Writing React Components"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1600/1*GEniDHmmO0nkVuKQ8fhLYw.png"><meta property="og:description" content="When I first started writing React, I remember seeing many different approaches to writing components, varying greatly from tutorial to tutorial. Though the framework has matured considerably since then, there doesn’t seem to yet be a firm ‘right’ way of doing things.
Over the past year at MuseFind, our team has written a lot of React components. We’ve gradually refined our approach until we’re happy with it.
This guide represents our suggested best practices. We hope it will be useful, whether you’re a beginner or experienced."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Our Best Practices for Writing React Components</h1><h2 class="post-subtitle"></h2><header class="post-info">Aug 20, 2017<div class="tags"><a href="/tags/react" class="tag-link">#react</a></div><div class="fb-ir-time"><time dateTime="2017-08-20T16:06:29.000Z" class="op-modified"></time><time dateTime="2017-08-20T16:06:29.000Z" class="op-published"></time></div></header></div><div class="post-banner"><img src="https://cdn-images-1.medium.com/max/1600/1*GEniDHmmO0nkVuKQ8fhLYw.png"></div><div class="wrap"><div class="post-content"><p>When I first started writing React, I remember seeing many different approaches to writing components, varying greatly from tutorial to tutorial. Though the framework has matured considerably since then, there doesn’t seem to yet be a firm ‘right’ way of doing things.</p>
<p>Over the past year at <a href="https://musefind.com/" target="_blank" rel="noopener">MuseFind</a>, our team has written a lot of React components. We’ve gradually refined our approach until we’re happy with it.</p>
<p>This guide represents our suggested best practices. We hope it will be useful, whether you’re a beginner or experienced.<br><a id="more"></a><br>Before we get started, a couple of notes:</p>
<ul>
<li>We use ES6 and ES7 syntax.</li>
<li>If you’re not sure of the distinction between presentational and container components, we recommend you <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.kuvqndiqq" target="_blank" rel="noopener">read this first</a>.</li>
<li>Please let us know in the comments if you have any suggestions, questions, or feedback.</li>
</ul>
<h3 id="Class-Based-Components"><a href="#Class-Based-Components" class="headerlink" title="Class Based Components"></a>Class Based Components</h3><p>Class based components are stateful and/or contain methods. We try to use them as sparingly as possible, but they have their place.</p>
<p>Let’s incrementally build our component, line by line.</p>
<h4 id="Importing-CSS"><a href="#Importing-CSS" class="headerlink" title="Importing CSS"></a>Importing CSS</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ExpandableForm <span class="keyword">from</span> <span class="string">'./ExpandableForm'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/ProfileContainer.css'</span></span><br></pre></td></tr></table></figure>
<p>I like <a href="https://medium.freecodecamp.com/a-5-minute-intro-to-styled-components-41f40eb7cd55" target="_blank" rel="noopener">CSS in JavaScript</a>, I do — in theory. But it’s still a new idea, and a mature solution hasn’t emerged. Until then, we import a CSS file to each component.</p>
<p>We also separate our dependency imports from local imports by a newline.</p>
<h4 id="Initializing-State"><a href="#Initializing-State" class="headerlink" title="Initializing State"></a>Initializing State</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ExpandableForm <span class="keyword">from</span> <span class="string">'./ExpandableForm'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/ProfileContainer.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">expanded</span>: <span class="literal">false</span> &#125;</span><br></pre></td></tr></table></figure>
<p>You can also use the older approach of initializing state in the constructor. More on that <a href="http://stackoverflow.com/questions/35662932/react-constructor-es6-vs-es7" target="_blank" rel="noopener">here</a>. We prefer the cleaner way.</p>
<p>We also make sure to export our class as the default.</p>
<h4 id="propTypes-and-defaultProps"><a href="#propTypes-and-defaultProps" class="headerlink" title="propTypes and defaultProps"></a>propTypes and defaultProps</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; string, object &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ExpandableForm <span class="keyword">from</span> <span class="string">'./ExpandableForm'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/ProfileContainer.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">expanded</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    model: object.isRequired,</span><br><span class="line">    title: string</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    model: &#123;</span><br><span class="line">      id: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    title: <span class="string">'Your Name'</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>propTypes and defaultProps are static properties, declared as high as possible within the component code. They should be immediately visible to other devs reading the file, since they serve as documentation.</p>
<p>If using React 15.3.0 or higher, use the <a href="https://github.com/reactjs/prop-types" target="_blank" rel="noopener">prop-types</a> package instead of React.PropTypes — nicely destructured, of course.</p>
<p>All your components should have propTypes.</p>
<h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; string, object &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ExpandableForm <span class="keyword">from</span> <span class="string">'./ExpandableForm'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/ProfileContainer.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">expanded</span>: <span class="literal">false</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    model: object.isRequired,</span><br><span class="line">    title: string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    model: &#123;</span><br><span class="line">      id: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    title: <span class="string">'Your Name'</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">this</span>.props.model.save()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleNameChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.model.changeName(e.target.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleExpand = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">expanded</span>: !<span class="keyword">this</span>.state.expanded &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>With class components, when you pass methods to subcomponents, you have to ensure that they have the right <em>this</em> when they’re called. This is usually achieved by passing <em>this.handleSubmit.bind(this)</em> to the subcomponent.</p>
<p>We think this approach is cleaner and easier, maintaining the correct context automatically via the ES6 arrow function.</p>
<h4 id="Passing-setState-a-Function"><a href="#Passing-setState-a-Function" class="headerlink" title="Passing setState a Function"></a><strong>Passing setState a Function</strong></h4><p>In the above example, we do this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(&#123; <span class="attr">expanded</span>: !<span class="keyword">this</span>.state.expanded &#125;)</span><br></pre></td></tr></table></figure>
<p>Here’s the dirty secret about setState — it’s actually asynchronous. React batches state changes for performance reasons, so the state may not change immediately after setState is called.</p>
<p>That means you should not rely on the current state when calling setState — since you can’t be sure what that state will be!</p>
<p>Here’s the solution — pass a function to setState, with the previous state as an argument.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">expanded</span>: !prevState.expanded &#125;))</span><br></pre></td></tr></table></figure>
<p>(Thanks to <a href="https://medium.com/@indiesquidge" target="_blank" rel="noopener">Austin Wood</a> for his help with this section).</p>
<h4 id="Destructuring-Props"><a href="#Destructuring-Props" class="headerlink" title="Destructuring Props"></a>Destructuring Props</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; string, object &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ExpandableForm <span class="keyword">from</span> <span class="string">'./ExpandableForm'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/ProfileContainer.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123; <span class="attr">expanded</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    model: object.isRequired,</span><br><span class="line">    title: string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    model: &#123;</span><br><span class="line">      id: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    title: <span class="string">'Your Name'</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">this</span>.props.model.save()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleNameChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.model.changeName(e.target.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleExpand = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">expanded</span>: !prevState.expanded &#125;))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      model,</span><br><span class="line">      title</span><br><span class="line">    &#125; = <span class="keyword">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> ( </span><br><span class="line">      &lt;ExpandableForm </span><br><span class="line">        onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125; </span><br><span class="line">        expanded=&#123;<span class="keyword">this</span>.state.expanded&#125; </span><br><span class="line">        onExpand=&#123;<span class="keyword">this</span>.handleExpand&#125;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;&#123;title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input</span></span><br><span class="line"><span class="regexp">            type="text"</span></span><br><span class="line"><span class="regexp">            value=&#123;model.name&#125;</span></span><br><span class="line"><span class="regexp">            onChange=&#123;this.handleNameChange&#125;</span></span><br><span class="line"><span class="regexp">            placeholder="Your Name"/</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>ExpandableForm&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Components with many props should have each prop on a newline, like above.</p>
<h4 id="Decorators"><a href="#Decorators" class="headerlink" title="Decorators"></a>Decorators</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@observer</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>If you’re using something like <a href="https://github.com/mobxjs/mobx" target="_blank" rel="noopener">mobx</a>, you can decorate your class components like so — which is the same as passing the component into a function.</p>
<p><a href="http://javascript.info/tutorial/decorators" target="_blank" rel="noopener">Decorators</a> are flexible and readable way of modifying component functionality. We use them extensively, with mobx and our own <a href="https://github.com/musefind/mobx-models" target="_blank" rel="noopener">mobx-models</a> library.</p>
<p>If you don’t want to use decorators, do the following:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfileContainer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Component code</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> observer(ProfileContainer)</span><br></pre></td></tr></table></figure>
<h4 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h4><p>Avoid passing new closures to subcomponents, like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">    type=<span class="string">"text"</span></span><br><span class="line">    value=&#123;model.name&#125;</span><br><span class="line">    <span class="comment">// onChange=&#123;(e) =&gt; &#123; model.name = e.target.value &#125;&#125;</span></span><br><span class="line">    <span class="comment">// ^Not this. Use the below:</span></span><br><span class="line">    onChange=&#123;<span class="keyword">this</span>.handleChange&#125;</span><br><span class="line">    placeholder=<span class="string">"Your Name"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>Here’s why: every time the parent component renders, a new function is created and passed to the input.</p>
<p>If the input were a React component, this would automatically trigger it to re-render, regardless of whether its other props have actually changed.</p>
<p>Reconciliation is the most expensive part of React. Don’t make it harder than it needs to be! Plus, passing a class method is easier to read, debug, and change.</p>
<p>Here’s our full component:</p>
<script src="//gist.github.com/70e436951dfeeb82dfdd4aa6d2541dce.js"></script>
<h3 id="Functional-Components"><a href="#Functional-Components" class="headerlink" title="Functional Components"></a>Functional Components</h3><p>These components have no state and no methods. They’re pure, and easy to reason about. Use them as often as possible.</p>
<h4 id="propTypes"><a href="#propTypes" class="headerlink" title="propTypes"></a>propTypes</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; func, bool &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/Form.css'</span></span><br><span class="line"></span><br><span class="line">ExpandableForm.propTypes = &#123;</span><br><span class="line">  onSubmit: func.isRequired,</span><br><span class="line">  expanded: bool</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Component declaration</span></span><br></pre></td></tr></table></figure>
<p>Here, we assign the propTypes before the component declaration, so they are immediately visible. We’re able to do this because of JavaScript function hoisting.</p>
<h4 id="Destructuring-Props-and-defaultProps"><a href="#Destructuring-Props-and-defaultProps" class="headerlink" title="Destructuring Props and defaultProps"></a>Destructuring Props and defaultProps</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; func, bool &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/Form.css'</span></span><br><span class="line"></span><br><span class="line">ExpandableForm.propTypes = &#123;</span><br><span class="line">  onSubmit: func.isRequired,</span><br><span class="line">  expanded: bool,</span><br><span class="line">  onExpand: func.isRequired</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExpandableForm</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> formStyle = props.expanded ? &#123;<span class="attr">height</span>: <span class="string">'auto'</span>&#125; : &#123;<span class="attr">height</span>: <span class="number">0</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form style=&#123;formStyle&#125; onSubmit=&#123;props.onSubmit&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">      &lt;button onClick=&#123;props.onExpand&#125;&gt;Expand&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>form&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Our component is a function, which takes its props as its argument. We can expand them like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; func, bool &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/Form.css'</span></span><br><span class="line"></span><br><span class="line">ExpandableForm.propTypes = &#123;</span><br><span class="line">  onSubmit: func.isRequired,</span><br><span class="line">  expanded: bool,</span><br><span class="line">  onExpand: func.isRequired</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExpandableForm</span>(<span class="params">&#123; onExpand, expanded = false, children, onSubmit &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> formStyle = expanded ? &#123;<span class="attr">height</span>: <span class="string">'auto'</span>&#125; : &#123;<span class="attr">height</span>: <span class="number">0</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form style=&#123;formStyle&#125; onSubmit=&#123;onSubmit&#125;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">      &lt;button onClick=&#123;onExpand&#125;&gt;Expand&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>form&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note we can also use default arguments to act as defaultProps in a highly readable manner. If expanded is undefined, we set it to false. (A bit of a forced example, since it’s a boolean, but very useful for avoiding ‘Cannot read <property> of undefined’ errors with objects).</property></p>
<p>Avoid the following ES6 syntax:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ExpandableForm = <span class="function">(<span class="params">&#123; onExpand, expanded, children &#125;</span>) =&gt;</span> &#123;</span><br></pre></td></tr></table></figure>
<p>Looks very modern, but the function here is actually unnamed.</p>
<p>This lack of name will not be a problem if your Babel is set up correctly — but if it’s not, any errors will show up as occurring in &lt;<anonymous>&gt; which is terrible for debugging.</anonymous></p>
<p>Unnamed functions can also cause problems with Jest, a React testing library. Due to the potential for difficult-to-understand bugs (and the lack of real benefit) we recommend using <em>function</em> instead of <em>const.</em></p>
<h4 id="Wrapping"><a href="#Wrapping" class="headerlink" title="Wrapping"></a>Wrapping</h4><p>Since you can’t use decorators with functional components, you simply pass it the function in as an argument:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; func, bool &#125; <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./styles/Form.css'</span></span><br><span class="line"></span><br><span class="line">ExpandableForm.propTypes = &#123;</span><br><span class="line">  onSubmit: func.isRequired,</span><br><span class="line">  expanded: bool,</span><br><span class="line">  onExpand: func.isRequired</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExpandableForm</span>(<span class="params">&#123; onExpand, expanded = false, children, onSubmit &#125;</span>) </span>&#123;  <span class="keyword">const</span> formStyle = expanded ? &#123;<span class="attr">height</span>: <span class="string">'auto'</span>&#125; : &#123;<span class="attr">height</span>: <span class="number">0</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form style=&#123;formStyle&#125; onSubmit=&#123;onSubmit&#125;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">      &lt;button onClick=&#123;onExpand&#125;&gt;Expand&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>form&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> observer(ExpandableForm)</span><br></pre></td></tr></table></figure>
<p>Here’s our full component:</p>
<script src="//gist.github.com/19d4ade69b1a3978730b104558fb5308.js"></script>
<h3 id="Conditionals-in-JSX"><a href="#Conditionals-in-JSX" class="headerlink" title="Conditionals in JSX"></a>Conditionals in JSX</h3><p>Chances are you’re going to do a lot of conditional rendering. Here’s what you want to avoid:</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*4zdSbYcOXTVchgSJqtk0Ig.png" alt="">Actual code I wrote in my early days at MuseFind… forgive me</p>
<p>No, nested ternaries are not a good idea.</p>
<p>There are some libraries that solve this problem (<a href="https://github.com/AlexGilleran/jsx-control-statements" target="_blank" rel="noopener">JSX-Control Statements</a>), but rather than introduce another dependency, we settled on this approach for complex conditions:</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*IVFlMaSGKqHISJueTC26sw.png" alt="">A refactored version of the above.</p>
<p>Use curly braces wrapping an <a href="http://stackoverflow.com/questions/8228281/what-is-the-function-construct-in-javascript" target="_blank" rel="noopener">IIFE</a>, and then put your if statements inside, returning whatever you want to render. Note that IIFE’s like this can cause a performance hit, but in most cases it will not be significant enough to warrant losing the readability factor.</p>
<p><strong>Update:</strong> Many commenters have recommended extracting this logic to a subcomponent that conditionally returns different buttons based on props. They’re right — splitting up your components as much as possible is always a good call. But keep the IIFE approach in mind as a fallback for quick conditionals.</p>
<p>Also, when you only want to render an element on one condition, instead of doing this…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  isTrue</span><br><span class="line">   ? <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>True!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">   : <span class="xml"><span class="tag">&lt;<span class="name">none</span>/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>… use short-circuit evaluation:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  isTrue &amp;&amp; </span><br><span class="line">    &lt;p&gt;True!<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Was this article useful? Please click the green heart below, or follow me and our publication for more.</p>
<p>Have any feedback? Leave a comment below.</p>
<p>Thanks for reading!</p>
<span>Source: </span><a href="https://engineering.musefind.com/our-best-practices-for-writing-react-components-dec3eb5c3fc8" target="_blank" title="https://engineering.musefind.com/our-best-practices-for-writing-react-components-dec3eb5c3fc8" class="post-from">https://engineering.musefind.com/our-best-practices-for-writing-react-components-dec3eb5c3fc8</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2017/08/What-I’ve-Learned-Over-5-Years-as-a-Software-Developer.html" class="prev">NEXT</a><a href="/2017/08/Nodejs-la-gi.html" class="next">PREV</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://nthung2112.github.io">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41935289-1",'auto');ga('send','pageview');</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>
<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Cách phân nhánh và chia việc trong nhóm với Git · Learn and Share</title><meta name="description" content="Cách phân nhánh và chia việc trong nhóm với Git - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Cách phân nhánh và chia việc trong nhóm với Git"><meta property="og:image" content="https://res.cloudinary.com/duqeezi8j/image/upload/v1524489964/Untitled_bppkvk.png"><meta property="og:description" content="Bạn vốn làm việc một mình một cõi, “thầu nguyên con” dự án. Dù phải code sấp mặt nhưng cuộc đời vẫn thật êm xuôi: tốc độ thần thánh 500 dòng/giờ, commit code mới pặc pặc vào master, cuối ngày chỉ việc git push, tắt máy, rồi dắt gấu đi nhậu (hoặc lội suối băng đèo về nhà thay tã cho con).
Ngờ đâu sếp (hoặc co-founder) xót thương bạn vất vả, bèn tuyển ngay 2 em đào nhí vào trợ giúp. Và mọi chuyện bắt đầu phức tạp từ đây: code trong team bị chồng chéo và xung đột liên tục, branch master đang thẳng thớm đẹp xinh bỗng phân nhánh như điên, tốc độ code của bạn giảm trong khi tốc độ chửi thề ngày một tăng nhanh. Bạn không còn thời giờ dắt gấu đi nhậu, cũng không thể lội kịp về nhà thay tã cho con nữa. Cuộc đời bế tắc."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Cách phân nhánh và chia việc trong nhóm với Git</h1><h2 class="post-subtitle"></h2><header class="post-info">Apr 26, 2018<div class="tags"><a href="/tags/git" class="tag-link">#git</a></div><div class="fb-ir-time"><time datetime="2018-04-26T14:50:00.000Z" class="op-modified"></time><time datetime="2018-04-26T14:50:00.000Z" class="op-published"></time></div></header></div><div class="post-banner"><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1524489964/Untitled_bppkvk.png"></div><div class="wrap"><div class="post-content"><p>Bạn vốn làm việc một mình một cõi, “thầu nguyên con” dự án. Dù phải code sấp mặt nhưng cuộc đời vẫn thật êm xuôi: tốc độ thần thánh 500 dòng/giờ, commit code mới pặc pặc vào master, cuối ngày chỉ việc git push, tắt máy, rồi dắt gấu đi nhậu (hoặc lội suối băng đèo về nhà thay tã cho con).</p>
<p>Ngờ đâu sếp (hoặc co-founder) xót thương bạn vất vả, bèn tuyển ngay 2 em đào nhí vào trợ giúp. Và mọi chuyện bắt đầu phức tạp từ đây: code trong team bị chồng chéo và xung đột liên tục, branch master đang thẳng thớm đẹp xinh bỗng phân nhánh như điên, tốc độ code của bạn giảm trong khi tốc độ chửi thề ngày một tăng nhanh. Bạn không còn thời giờ dắt gấu đi nhậu, cũng không thể lội kịp về nhà thay tã cho con nữa. Cuộc đời bế tắc.</p>
<a id="more"></a>
<p><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1524414315/git-merge-hell-smaller_lxhizg.png" alt="Nhìn hình này bạn có thấy quen không (nguồn: Xebia.com)?"></p>
<p>Thôi đừng vội lật bàn quýnh cả sếp lẫn đào. Hãy thử làm theo một số quy ước sau đây, đảm bảo team dev nho nhỏ xinh xinh của bạn sẽ không còn “giẫm chân” nhau nữa. Công việc xuôi buồm mát mái, tình đồng nghiệp sẽ lại thương mến thương nè.</p>
<h3 id="Vay-van-de-chinh-o-day-la-gi"><a href="#Vay-van-de-chinh-o-day-la-gi" class="headerlink" title="Vậy, vấn đề chính ở đây là gì?"></a>Vậy, vấn đề chính ở đây là gì?</h3><p>Không có gì nghiêm trọng cả, chỉ là chúng ta chưa có một quy ước phân chia nhánh (branch) hợp lý thôi. So với các chương trình quản lý phiên bản khác như SVN, khả năng phân nhánh của Git phải nói là siêu nhẹ và cực kì dễ dàng. Do đó, bạn có thể chia dự án thành 2 nhánh chính:</p>
<ul>
<li>master</li>
<li>dev</li>
</ul>
<p>Nhánh master sẽ là nơi chứa phần code <strong>ổn định nhất</strong>, sẵn sàng để triển khai bất cứ lúc nào. Trong khi đó, nhánh dev ban đầu được tách ra từ master, và sẽ chứa phần code <strong>mới nhất</strong> được phát triển.</p>
<blockquote>
<p><strong>Nói nhỏ:</strong> Một số tài liệu sẽ đặt tên nhánh tách ra là develop. Tùy bạn chọn tên gì cũng được, nhưng theo Ehkoo thì gõ dev nhanh hơn gõ develop :p</p>
</blockquote>
<p><strong>Nhắc bài chút xíu</strong><br>Để tạo nhánh mới trong Git, bạn dùng lệnh:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;tên nhánh mới&gt; [nhánh gốc]</span><br></pre></td></tr></table></figure>
<p>Chẳng hạn, để tạo nhánh dev từ master, bạn gõ git checkout -b dev master. Nếu không cung cấp tham số [nhánh gốc], nhánh mới tạo sẽ dựa trên nhánh hiện tại bạn đang ở. Để xem nhánh hiện tại là nhánh nào, bạn có thể dùng lệnh git branch.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">  auth</span><br><span class="line">* auth-session</span><br><span class="line">  dev</span><br><span class="line">  graphql</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>
<p>Trong ví dụ trên thì nhánh hiện tại chính là auth-session.</p>
<h3 id="Phan-chia-cong-viec"><a href="#Phan-chia-cong-viec" class="headerlink" title="Phân chia công việc"></a>Phân chia công việc</h3><p>Mỗi khi phát triển tính năng mới, bạn sẽ tạo một nhánh từ dev.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b login dev</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Đặt tên nhánh là gì đây?</strong><br>Tùy bạn thôi. Một số tài liệu sẽ khuyến khích bạn dùng tiền tố feature/&lt;tên tính năng&gt; để dễ phân biệt. Nhưng theo kinh nghiệm của Ehkoo, ngoài nhánh master, dev, và các nhánh fix-xxx, thì tất cả các nhánh còn lại đều có thể ngầm hiểu là nhánh chức năng.</p>
</blockquote>
<p>Nhánh này dưới quyền cai quản của bạn, nên mặc sức muốn làm gì thì làm nhé. Hãy commit thường xuyên, dù chỉ là những thay đổi nhỏ nhất. Cũng đừng ngần ngại rằng commit nhỏ sẽ khiến git log khó theo dõi. Chúng ta sẽ có cách xử lý chúng sau.</p>
<blockquote>
<p><strong>Câu hỏi: Ê, lỡ như có hai hay nhiều người cùng làm chung một tính năng thì sao?</strong><br>Nếu vậy, bạn có thể tiếp tục chia nhỏ hơn nữa, để đảm bảo mỗi người làm việc trên một nhánh độc lập. Cũng theo kinh nghiệm riêng của Ehkoo, thì một tính năng _to_ sẽ có nhiều nhất là 2-3 người cùng phát triển. Nếu vượt quá con số này, thì nên xem lại định nghĩa và cách phân chia việc cho tính năng đó.</p>
</blockquote>
<h3 id="Chuan-bi-merge-vao-dev"><a href="#Chuan-bi-merge-vao-dev" class="headerlink" title="Chuẩn bị merge vào dev"></a>Chuẩn bị merge vào dev</h3><p>Sau khi code hoàn tất và tất cả unit tests đã chạy thành công, giờ là lúc bạn merge/gửi code để review tính năng mới vào dev. Thông thường, sẽ có 2 trường hợp xảy ra:</p>
<p><strong>Trường hợp 1: Không có gì mới trong dev</strong></p>
<p>Giả sử lúc đó Git history của dự án giống như thế này:</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/31/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Như bạn thấy, nhánh login màu vàng được rẽ ra từ nhánh dev màu xanh, và trong nhánh dev không có code gì mới. Đây là trường hợp lý tưởng, đảm bảo khi merge vào dev chúng ta sẽ không bị xung đột code.</p>
<p><strong>Trường hợp 2: Có commits mới trong nhánh dev</strong></p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/30/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Trong trường hợp này, branch dev (màu xanh) đang có 2 commits phía trước branch login (màu vàng). Nếu trong 2 commits đó có chứa thay đổi liên quan đến dev, chẳng hạn như package.json, thì khả năng cao là sẽ xảy ra xung đột khi merge trực tiếp login vào. Mà dù có may mắn không xảy ra xung đột code, thì merge vào cũng sẽ làm history xấu đi.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/33/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Do đó, chúng ta sẽ cần sửa lại history của nhánh login bằng cách dùng git rebase.</p>
<h4 id="git-rebase-la-gi"><a href="#git-rebase-la-gi" class="headerlink" title="git rebase là gì?"></a>git rebase là gì?</h4><p>git rebase sẽ đem những commits bên trong nhánh login và áp dụng lại vào sau commit mới nhất trong nhánh dev. Cú pháp của lệnh này là:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase &lt;tên nhánh muốn áp dụng lại&gt;</span><br></pre></td></tr></table></figure>
<p>Trong trường hợp hiện tại, chúng ta sẽ chạy những lệnh sau:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Cập nhật repo hiện tại, đồng thời lấy về commits mới nhất của `dev`</span><br><span class="line">git pull</span><br><span class="line"># Chuyển qua nhánh `login`, có thể bỏ qua bước này nếu bạn chắc chắn</span><br><span class="line"># mình đang ở `login`</span><br><span class="line">git checkout login</span><br><span class="line"># Tiến hành rebase</span><br><span class="line">git rebase dev</span><br></pre></td></tr></table></figure>
<p>Nếu xảy ra xung đột code, bạn có thể phát hiện và giải quyết chúng sớm. Nguyên tắc chung là không sửa code của người khác, và chỉ kết hợp thêm những gì bạn làm. Việc thực hiện rebase tại nhánh chức năng do bạn phụ trách giúp giảm thiểu khả năng mất code, vì bạn là người hiểu rõ nhất phần code bạn viết.</p>
<p>Sau khi giải quyết hết các xung đột trong code, bạn chạy git rebase –continue để tiếp tục tiến trình rebase. Bạn cũng có thể chạy git rebase –abort để hủy bỏ rebase và đưa nhánh login về lại trạng thái ban đầu.</p>
<blockquote>
<p><strong>Mách nhỏ:</strong><br>Một cách giúp cho việc giải quyết xung đột trong code dễ dàng hơn là dùng git mergetool. Có rất nhiều công cụ hỗ trợ, và <a href="http://meldmerge.org/" target="_blank" rel="noopener">Meld</a> là một trong số đó.</p>
</blockquote>
<p>Nếu chưa quen rebase, bạn có thể tạo một branch mới từ login, ví dụ: git checkout -b test login, và tiến hành rebase trên branch này. Sau khi chắc chắn là mọi thứ ổn thỏa, bạn có thể quay lại và tiến hành rebase cho login.</p>
<p>Khi rebase xong, mong là history của bạn trông sẽ giống như thế này:</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/32/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Bạn thấy quen không? Chính là trường hợp 1 đã nói ở trên đó.</p>
<h4 id="rebase-interactively"><a href="#rebase-interactively" class="headerlink" title="rebase interactively"></a>rebase interactively</h4><p>Ở phần trên, chúng ta có băn khoăn là commit thường xuyên dễ tạo ra nhiều commit nhỏ đôi khi không cần thiết. Bạn có thể dùng git rebase để dọn dẹp chúng bằng cách thêm tham số -i (interactively) như sau:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Chắc chắn rằng bạn đang ở nhánh `login`</span><br><span class="line">git checkout login</span><br><span class="line"># Rebase lên dev interactively</span><br><span class="line">git rebase dev -i</span><br></pre></td></tr></table></figure>
<p>Bạn sẽ được chuyển đến một giao diện tương tự như bên dưới.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pick ff80e85 A way to organize routes per module</span><br><span class="line">pick 67cf18d Try Netlify Functions</span><br><span class="line">pick 5546901 Add Dashboard view</span><br><span class="line">pick 2a66ae3 Change layout</span><br><span class="line">pick 58755b4 Add Books module, 404 page.</span><br><span class="line">pick fd79cb9 Refactor. Reduce inline styling.</span><br><span class="line">pick c671f60 Restyling 404 page.</span><br><span class="line">pick 33ef874 Basic layout for book management page.</span><br><span class="line">pick 49c423a Clean up UI a bit</span><br><span class="line">pick 3aa2840 Init</span><br></pre></td></tr></table></figure>
<p>Theo lý thuyết, rebase sẽ đem từng commit và áp dụng lại theo thứ tự từ trên xuống dưới. Bởi vậy, bạn có thể thoải mái sắp xếp lại thứ tự của các commits trên. Bạn để ý lệnh pick ở phía trước mỗi commit. Lệnh này sẽ báo cho git biết hành động bạn muốn làm với commit, trong trường hợp này là áp dụng lại commit. Ngoài pick (p), chúng ta còn có:</p>
<ul>
<li>reword (r): áp dụng lại commit, và sửa commit message</li>
<li>edit (e): áp dụng commit, nhưng dừng quá trình rebase lại để sửa code</li>
<li>squash (s): kết hợp commit hiện tại vào commit trước nó</li>
<li>fixup (f): giống như squash nhưng bỏ đi commit message</li>
<li>exec (x): chạy một lệnh shell nào đó</li>
<li>drop (d): bỏ, không sử dụng commit này</li>
</ul>
<p><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1524470951/Peek_2018-04-23_11-06_zkqjpt.gif" alt="Bạn có thể dùng các chữ viết tắt cho các commands"></p>
<p>Bằng cách dùng rebase interactively, chúng ta có thêm nhiều quyền để quản lý và sửa đổi commits theo ý mình, làm cho history sạch đẹp hơn.</p>
<h3 id="Merge-vao-dev"><a href="#Merge-vao-dev" class="headerlink" title="Merge vào dev"></a>Merge vào dev</h3><p>Sau khi dọn dẹp nhánh login sạch đẹp, chúng ta có thể merge nhánh này vào dev. Thông thường, bạn – dev cứng nhất team – sẽ là người tiến hành kiểm tra và merge. Bạn có thể chọn hai cách tiếp cận:</p>
<h4 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h4><p>Bạn có thể merge trực tiếp vào dev như thế này:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Chuyển qua nhánh `dev`</span><br><span class="line">git checkout dev</span><br><span class="line"># Merge `login` vào `dev`</span><br><span class="line">git merge login</span><br></pre></td></tr></table></figure>
<p>Kết quả sẽ là:</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/34/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Như bạn thấy, một commit mới được tạo ra, giúp bạn dễ dàng nhận biết thời điểm nhánh login được merge vào. Cách thức này gọi là merge fast-forward. Khi dự án phát triển dần theo thời gian, history của dev sẽ như thế này.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/0agufwbv/2/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Bên cạnh đó, chúng ta cũng có cách merge non-fast-forward:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge login --no-ff</span><br></pre></td></tr></table></figure>
<p>Và đây là kết quả:</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/r7rp7sp5/35/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Tất cả commits của login đã được kết hợp vào dev. Boom! login biến mất khỏi thế gian như chưa hề tồn tại. SAD!</p>
<p>Lợi ích dễ thấy nhất của merge non-fast-forward là giúp cho history của bạn thẳng thớm gọn gàng, còn bất lợi là bạn không phân biệt được commits nào là của nhánh tính năng, cũng như thời điểm merge diễn ra. Trong trường hợp nhánh tính năng có quá nhiều commits nhỏ và dư thừa, chẳng hạn như những commits sửa lỗi chính tả, cập nhật thư viện…, history của bạn sẽ bị nhiễu.</p>
<h4 id="rebase-squash-va-merge"><a href="#rebase-squash-va-merge" class="headerlink" title="rebase, squash và merge"></a>rebase, squash và merge</h4><p>Ngoài cách merge các commits của nhánh tính năng vào dev, bạn có thể rebase và squash tất cả commits lại làm một, sau đó tiến hành merge. Cách làm này giúp cho dev luôn ở trạng thái gọn gàng nhất, không chứa commit dư thừa. Trong trường hợp lý tưởng, history của dev sẽ giống như sau:</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/0agufwbv/5/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Để cách làm này phát huy tối đa hiệu quả, yêu cầu commit message phải được viết thật rõ ràng và chi tiết.</p>
<h3 id="Merge-vao-master"><a href="#Merge-vao-master" class="headerlink" title="Merge vào master"></a>Merge vào master</h3><p>Yay! Sau một thời gian quằn quại, cuối cùng team của bạn đã ra được sản phẩm tương đối ổn. Giờ là lúc merge vào master và triển khai lên server.</p>
<p>Lúc này, cũng như khi merge vào dev, bạn có thể chọn merge (fast-forward hoặc non-fast-forward) hay rebase, squash và merge, nhưng theo kinh nghiệm của Ehkoo, merge –no-ff sẽ là lựa chọn tốt nhất, giúp cho master và dev luôn song song với nhau.</p>
<h3 id="Hotfix"><a href="#Hotfix" class="headerlink" title="Hotfix"></a>Hotfix</h3><p>Hôm nay, thứ 6, ngày 1X. Bạn chạy npm run build rồi rsync code ở master lên server. Mọi thứ hoàn toàn bình thường. Bạn vào website, click vài cái. “Ngon, chạy rồi”, bạn thầm nghĩ, “đi nhậu thoy!” Nhưng vừa vươn vai định gọi điện cho gấu, thì “ó e ò e”, chuông điện thoại reng, số máy của sếp. “Hí hí, chắc được thưởng nóng chăng?” Bạn bắt máy, và nghe giọng sếp âu yếm GẦM ở đầu dây: “LỖI RỒI MÁÁÁ!!!”</p>
<p>Xin đừng trụy tim. Hãy hít một hơi thật sâu, rồi bình tĩnh tạo một branch mới từ master, fix-xxx chẳng hạn. Nhờ lắng nghe tiếng sếp gầm, bạn đã mau chóng mò ra lỗi trong đống code (vì bạn là dev cứng mà hihi). Bạn khẽ rủa thầm ku đào nhí viết code không kĩ, tự rủa nhẹ bản thân vì review sót. Nhưng thôi kệ, fix nhanh rồi còn về, kẻo gấu xé xác T^T.</p>
<p>Bạn bèn merge –no-ff nhánh fix-xxx vào cả hai nhánh master và dev. Bằng cách này, phần sửa lỗi sẽ xuất hiện ở cả hai branches, giúp history không bị rẽ nhánh bất ngờ.</p>
<p>Bạn push, và chuông điện thoại lại vang lên…</p>
<h3 id="Vai-van-de-linh-tinh-khac"><a href="#Vai-van-de-linh-tinh-khac" class="headerlink" title="Vài vấn đề linh tinh khác"></a>Vài vấn đề linh tinh khác</h3><h4 id="Co-can-nhanh-staging-khong"><a href="#Co-can-nhanh-staging-khong" class="headerlink" title="Có cần nhánh staging không?"></a>Có cần nhánh staging không?</h4><p>Trong một số dự án, ngoài dev, còn có một đội ngũ “thần bí” được gọi là QA/QC. Họ được sinh ra trong team là để bới lỗi của anh em nhà dev, nên quan hệ đôi bên không được tình thương mến thương cho lắm. Dầu vậy, họ vẫn cần một nhánh riêng có tên gọi staging. Nhánh này sẽ chứa phần code ở giữa master và dev. staging được tách ra từ dev, có nhiều tính năng hơn master, và tương đối ổn định để có thể merge vào master.</p>
<iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/0agufwbv/6/embedded/result/light" frameborder="0" allowfullscreen></iframe>
<p>Tùy vào tình hình cụ thể của team mà bạn quyết định có cần staging hay không.</p>
<h4 id="Viet-commit-message-nhu-the-nao-cho-chuan"><a href="#Viet-commit-message-nhu-the-nao-cho-chuan" class="headerlink" title="Viết commit message như thế nào cho chuẩn?"></a>Viết commit message như thế nào cho chuẩn?</h4><p>Nếu bạn theo chuẩn rebase, squash và merge thì chuyện viết commit message tốt rất quan trọng, vì nó sẽ là tài liệu để mô tả toàn bộ một tính năng. Nhưng nên viết thế nào? Có một vài gợi ý cho bạn đây:</p>
<ul>
<li>Dòng đầu tiên không dài quá 80 chữ, luôn bắt đầu bằng động từ ở thì hiện tại, ngắn gọn súc tích, ví dụ: <em>Add module Authentication</em>. Bạn có thể chọn thêm tiền tố nếu cần thiết, chẳng hạn: <em>Feature: Add module Authentication</em> hay <em>Fix: unable to get location params from URL</em></li>
<li>Bỏ trống hai dòng</li>
<li>Sau đó mô tả chi tiết về tính năng đang làm, những điểm cần lưu ý, phần nào của tính năng cần được cải thiện…</li>
<li>Khuyến khích bạn kèm theo chữ ký <em>signature</em> khi commit bằng git commit -s</li>
</ul>
<p>Một ví dụ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Feature: Add module Authentication</span><br><span class="line"></span><br><span class="line">Signed-off-by: Long Dep Trai &lt;long@ehkoo.com&gt;</span><br><span class="line"></span><br><span class="line">This module allows users to register/login into our website using</span><br><span class="line">AWS Cognito account. Added routes:</span><br><span class="line"></span><br><span class="line">* /auth/register</span><br><span class="line">* /auth/login</span><br><span class="line"></span><br><span class="line">Users after registration will receive a SMS to confirm their account.</span><br><span class="line"></span><br><span class="line">TODO:</span><br><span class="line"></span><br><span class="line">* Implement social identities</span><br><span class="line">* Add Logout feature</span><br><span class="line">* Add Forgot password feature</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Tiếng Anh hay tiếng Việt?</strong><br>Tùy thuộc vào team của bạn, nhưng phải thống nhất trong toàn dự án, và viết tiếng Việt thì nhớ đừng sai chính tả kẻo bị công an bắt nhé.</p>
</blockquote>
<h4 id="Co-nen-tag-version-hay-khong"><a href="#Co-nen-tag-version-hay-khong" class="headerlink" title="Có nên tag version hay không?"></a>Có nên tag version hay không?</h4><p>Câu trả lời là <em>HÊN XUI</em>, tùy tính chất từng team. Nếu tần suất triển khai code từ master của team không cao, khoảng vài tháng/lần thì tag version là cách tốt để theo dõi những thay đổi. Hoặc nếu bạn đang xây dựng lib hoặc làm việc open source.</p>
<p>Còn nếu team bạn theo chuẩn “move fast, break things”, thì có lẽ không cần tag version đâu. Thêm nữa, để tag version phát huy hiệu quả tối đa, thì <em>CHANGELOG</em> cần phải được viết kỹ càng. Đồng thời, đừng quên tag version theo <a href="https://semver.org/" target="_blank" rel="noopener">semver</a> nhé.</p>
<p><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1524474052/tumblr_lc63ingGof1qz6pqio1_500_mybavi.png" alt="Already broken"></p>
<h3 id="Ket-luan"><a href="#Ket-luan" class="headerlink" title="Kết luận"></a>Kết luận</h3><p>Chúng ta có thể tóm tắt bài này lại như sau:</p>
<ul>
<li>Dự án được chia thành nhiều nhánh, bao gồm master, dev và có thể có staging</li>
<li>Các nhánh tính năng được chia ra từ dev, phát triển độc lập, được rebase trước khi merge lại vào dev</li>
<li>Rebase có thể thay đổi một chút history, hoặc squash lại thành một commit duy nhất</li>
<li>Merge có thể là fast-forward hoặc non-fast-forward</li>
<li>dev sẽ được merge vào master mỗi khi triển khai. Trường hợp có staging, dev sẽ được merge vào staging, và staging sẽ được merge vào master.</li>
<li>Các nhánh hotfix sẽ được chia ra từ master, sau đó merge –no-ff vào master và dev</li>
</ul>
<p>Dĩ nhiên bài viết này chỉ mang tính tham khảo, vì mỗi team mỗi công ty sẽ có những cách làm riêng. Tuy nhiên, nếu bạn không may lâm vào cảnh trái ngang như ở đầu bài, thì đây là một workflow rất nên nghiên cứu và áp dụng. Mong rằng trong tương lai, dự án của bạn sẽ không trở thành “kim tự tháp” như hình dưới đây.</p>
<p><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1524414465/11406260_10204684523099229_6956873399787391385_o_mscrhf.jpg" alt="The pyramid of doom"></p>
<span>Source: </span><a href="https://ehkoo.com/bai-viet/git-workflow-phan-nhanh-va-chia-viec-trong-nhom" target="_blank" title="https://ehkoo.com/bai-viet/git-workflow-phan-nhanh-va-chia-viec-trong-nhom" class="post-from">https://ehkoo.com/bai-viet/git-workflow-phan-nhanh-va-chia-viec-trong-nhom</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2018/04/Hieu-sau-ve-React-Higher-Order-Components.html" class="prev">NEXT</a><a href="/2018/04/Tim-hieu-ve-mot-so-khai-niem-trong-Git.html" class="next">PREV</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://nthung2112.github.io">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41935289-1",'auto');ga('send','pageview');</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>
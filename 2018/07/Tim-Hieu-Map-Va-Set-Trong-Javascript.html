<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title> Tìm hiểu Map và Set trong Javascript · Learn and Share</title><meta name="description" content="Tìm hiểu Map và Set trong Javascript - Hung Tan Nguyen"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="rk-Nc1c8xi1CdZ0ZQIVV-ifsndGrHanIuSHI-yTHZYE"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="Tìm hiểu Map và Set trong Javascript"><meta property="og:image" content="https://res.cloudinary.com/duqeezi8j/image/upload/v1521964972/Hanoi-01_1250_tqa22l.png"><meta property="og:description" content="Được giới thiệu từ ES6, Map, Set, WeakMap, và WeakSet là những cấu trúc dữ liệu giúp thao tác trên tập hợp. Bài viết này sẽ giới thiệu cách hoạt động cũng như các ứng dụng của chúng."></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nthung2112" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item search-form-input"><div class="search-icon"><div class="search-icon__circle"></div><div class="search-icon__rectangle"></div></div></li></ul><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" placeholder="Type something..." class="ins-search-input"><span class="ins-close ins-selectable"><div class="close-icon"><div class="close-icon__x"></div><div class="close-icon__y"></div></div></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>var rootUrl = "/";
var contentUrl = '/content.json';
(function (window) {
  var INSIGHT_CONFIG = {
  TRANSLATION: {
      POSTS:'Posts',
      PAGES: 'Pages',
      CATEGORIES: 'Categories',
      TAGS: 'Tags',
      UNTITLED: '(Untitled)'
    },
    ROOT_URL: rootUrl,
    CONTENT_URL: contentUrl,
  };
  window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);</script></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">Tìm hiểu Map và Set trong Javascript</h1><h2 class="post-subtitle"></h2><header class="post-info">Jul 8, 2018<div class="tags"><a href="/tags/javascript" class="tag-link">#javascript</a></div><div class="fb-ir-time"><time dateTime="2018-07-08T08:12:00.000Z" class="op-modified"></time><time dateTime="2018-07-08T08:12:00.000Z" class="op-published"></time></div></header></div><div class="post-banner"><img src="https://res.cloudinary.com/duqeezi8j/image/upload/v1521964972/Hanoi-01_1250_tqa22l.png"></div><div class="wrap"><div class="post-content"><p>Được giới thiệu từ ES6, Map, Set, WeakMap, và WeakSet là những cấu trúc dữ liệu giúp thao tác trên tập hợp. Bài viết này sẽ giới thiệu cách hoạt động cũng như các ứng dụng của chúng.<br><a id="more"></a></p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><em>Map</em>, <em>mảng kết hợp</em> (associate arrays) hay <em>từ điển</em> (dictionary/dict) là những thuật ngữ dùng để chỉ một cấu trúc dữ liệu, cho phép bạn ánh xạ từ một <em>khóa</em> (key) tương ứng với một <em>giá trị</em> (value). Trong JavaScript, chúng ta có thể sử dụng <em>object</em> để thể hiện cấu trúc này.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = &#123;</span><br><span class="line">  hello: <span class="string">'Xin chào'</span>,</span><br><span class="line">  bye: <span class="string">'Tạm biệt'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dict[<span class="string">'hello'</span>]) <span class="comment">// Xin chào</span></span><br></pre></td></tr></table></figure>
<p>Tuy nhiên, nếu dùng <em>object</em> thì bạn chỉ có thể dùng <em>chuỗi</em> làm <em>khóa</em>. Ngoài ra, cách này cũng có một số <a href="http://speakingjs.com/es5/ch17.html#_pitfalls_using_an_object_as_a_map" target="_blank" rel="noopener">hạn chế khác</a>. Lớp Map do ES6 giới thiệu sẽ giúp giải quyết những vấn đề này. Với Map, bạn có thể sử dụng bất cứ dạng dữ liệu nào để làm <em>khóa</em>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">bar</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> dict = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">dict</span><br><span class="line"> .set(<span class="string">'foo'</span>, <span class="number">123</span>)</span><br><span class="line"> .set(obj, <span class="string">'hello world'</span>)</span><br><span class="line"></span><br><span class="line">dict.get(<span class="string">'foo'</span>) <span class="comment">// 123</span></span><br><span class="line">dict.get(obj)   <span class="comment">// 'hello world'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Lấy giá trị của một khóa không tồn tại</span></span><br><span class="line">dict.get(<span class="string">'wat'</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>Bạn cũng có thể truyền vào hàm dựng của Map một mảng các cặp giá trị dạng [key, value], ví dụ như sau:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'foo'</span>, <span class="number">123</span>],</span><br><span class="line">  [obj, <span class="string">'hello world'</span>]</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p>Như đã nói ở trên, bạn có thể dùng bất cứ dạng dữ liệu gì để làm <em>khóa</em> cho Map, kể cả mảng, object, hàm, hay NaN.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>]</span><br><span class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">dict</span><br><span class="line"> .set(arr, <span class="string">'an array'</span>)</span><br><span class="line"> .set(f, <span class="string">'a function'</span>)</span><br><span class="line"> .set(<span class="literal">NaN</span>, <span class="string">'not a number'</span>)</span><br></pre></td></tr></table></figure>
<p>Bản thân Map sử dụng phương thức so sánh <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#A_model_for_understanding_equality_comparisons" target="_blank" rel="noopener">SameValueZero</a> để tìm <em>khóa</em> và giá trị tương ứng. SameValueZero hoạt động tương tự như ===, nhưng xem các giá trị NaN bằng nhau, cũng như +0 bằng -0.</p>
<blockquote>
<p><strong>Đố-hẻm-vui</strong>: Đố bạn kết quả của các biểu thức sau là gì?</p>
<p>NaN == NaN<br>NaN === NaN<br>Object.is(NaN, NaN)</p>
</blockquote>
<p>Do SameValueZero nên hai <em>object</em> khác nhau sẽ là hai <em>khóa</em> riêng biệt.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o1 = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123;&#125;</span><br><span class="line"></span><br><span class="line">dict.set(o1, <span class="string">'Ô Một'</span>).set(o2, <span class="string">'Ô Hai'</span>)</span><br><span class="line">dict.get(o2) <span class="comment">// Ô Hai</span></span><br><span class="line">dict.get(&#123;&#125;) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>Nếu trong map đã có sẵn <em>khóa</em>, dữ liệu mới sẽ bị ghi đè lên.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">m.set(<span class="string">'foo'</span>, <span class="number">1</span>)</span><br><span class="line">m.set(<span class="string">'foo'</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">m.get(<span class="string">'foo'</span>) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>Để duyệt qua các <em>khóa</em> và giá trị trong Map, bạn có thể dùng:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'foo'</span>, <span class="number">1</span>], [<span class="string">'bar'</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">dict.keys()    <span class="comment">// ['foo', 'bar']</span></span><br><span class="line">dict.values()  <span class="comment">// [1, 2]</span></span><br><span class="line">dict.entries() <span class="comment">// [ ['foo', 1], ['bar', 2] ]</span></span><br><span class="line">dict.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, map</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span> has <span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">&#125;, <span class="comment">/* thisArgs bạn có thể truyền vào tham chiếu cho `this` ở đây */</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sử dụng for..of cùng với destructuring</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> dict) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span> has <span class="subst">$&#123;value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bạn cũng có thể dùng toán tử spread … với Map</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'foo'</span>, <span class="number">1</span>], [<span class="string">'bar'</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"><span class="built_in">console</span>.log([</span><br><span class="line">  [<span class="string">'wut'</span>, <span class="number">3</span>],</span><br><span class="line">  ...dict</span><br><span class="line">])</span><br><span class="line"><span class="comment">// [ [ 'wut', 3 ], [ 'foo', 1 ], [ 'bar', 2 ] ]</span></span><br></pre></td></tr></table></figure>
<p>Một số thao tác khác với Map.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dict = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'foo'</span>, <span class="number">1</span>], [<span class="string">'bar'</span>, <span class="number">2</span>]</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// Đếm số cặp giá trị trong map</span></span><br><span class="line">dict.size <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Kiểm tra trong map có khóa "foo" hay không</span></span><br><span class="line">dict.has(<span class="string">'foo'</span>) <span class="comment">// true</span></span><br><span class="line">dict.has(<span class="string">'wut'</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Xóa một khóa, trả về boolean nếu thành công, false nếu thất bại</span></span><br><span class="line">dict.delete(<span class="string">'wut'</span>) <span class="comment">// false</span></span><br><span class="line">dict.delete(<span class="string">'foo'</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Xóa hết các cặp giá trị của map</span></span><br><span class="line">dict.clear()</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Tại sao lại là size mà không phải length?</strong><br>Một số độc giả tinh ý sẽ nhận ra chúng ta dùng size thay vì length để đếm số cặp giá trị trong map. Lý do là vì: length dùng cho những chuỗi có thể index (đánh số) được, ví dụ với <em>mảng</em> ta có thể arr[3]. Ngược lại, size dành cho những cấu trúc không có thứ tự như Map và Set.</p>
</blockquote>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>Set là tập hợp các giá trị không bị trùng lặp, nghĩa là trong một <em>set</em> không thể có hai giá trị bằng nhau.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">set</span><br><span class="line">  .add(<span class="string">'red'</span>)</span><br><span class="line">  .add(<span class="string">'blue'</span>)</span><br><span class="line">  .add(<span class="string">'sweet'</span>)</span><br><span class="line">  .add(<span class="string">'you'</span>)</span><br><span class="line"></span><br><span class="line">s.size <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<p>Bạn cũng có thể truyền một <em>mảng</em> vào hàm dựng của Set.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'sweet'</span>, <span class="string">'red'</span>, <span class="string">'you'</span>])</span><br><span class="line"><span class="built_in">console</span>.log(s) <span class="comment">// Set (4) &#123;'red', 'blue', 'sweet', 'you'&#125;</span></span><br></pre></td></tr></table></figure>
<p>Bạn cũng có thể thấy giá trị ‘red’ bị trùng lặp đã được loại bỏ. Chúng ta có thể áp dụng Set để tạo ra một <em>mảng</em> chứa những phần tử duy nhất.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'sweet'</span>, <span class="string">'red'</span>, <span class="string">'you'</span>]</span><br><span class="line"><span class="keyword">const</span> b = [...new <span class="built_in">Set</span>(a)]</span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// [ 'red', 'blue', 'sweet', 'you' ]</span></span><br></pre></td></tr></table></figure>
<p>Cũng tương tự như Map, Set sử dụng SameZeroValue để so sánh các phần tử với nhau.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="literal">NaN</span>, &#123;&#125;, obj])</span><br><span class="line">s.has(<span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line">s.has(obj) <span class="comment">// true</span></span><br><span class="line">s.has(&#123;&#125;)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>Để duyệt qua các phần tử của Set, bạn có thể dùng các phương thức như với Map.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vì Set không có khái niệm keys nên kết quả của `s.keys()` và `s.values()` là như nhau.</span></span><br><span class="line">s.keys()</span><br><span class="line">s.values()</span><br><span class="line"></span><br><span class="line">s.entries()</span><br><span class="line">s.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, key, setReference</span>) </span>&#123;</span><br><span class="line">&#125;, thisArg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> el <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(el)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Một số thao tác khác trên Set.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// Xóa một phần tử trong set</span></span><br><span class="line">s.delete(<span class="number">3</span>) <span class="comment">// Set (4) &#123;1, 2, 4, 5&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Xóa hết phần tử trong set</span></span><br><span class="line">s.clear()</span><br></pre></td></tr></table></figure>
<h3 id="WeakMap-va-WeakSet"><a href="#WeakMap-va-WeakSet" class="headerlink" title="WeakMap và WeakSet"></a>WeakMap và WeakSet</h3><p>ES6 cũng giới thiệu hai lớp WeakMap và WeakSet. So với Map, các <em>khóa</em> của WeakMap bắt buộc phải là <em>object</em>, và chúng sẽ bị giải phóng khỏi bộ nhớ (garbage-collecting – “hốt rác”) đầu tiên nếu không có tham chiếu nào.</p>
<p>WeakMap có các phương thức tương tự như Map, ngoại trừ việc bạn không thể duyệt qua WeakMap bằng .keys(), .values(), .entries() hay for..of. Bạn cũng không thể .clear(), vì lý do an toàn dữ liệu.</p>
<p>Một ứng dụng của WeakMap là dùng để chứa dữ liệu private mà không gây ra rò rỉ bộ nhớ.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privates = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> data = &#123; <span class="attr">phoneNumber</span>: <span class="number">123</span> &#125;</span><br><span class="line">    privates.set(<span class="keyword">this</span>, data)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getPhoneNumber() &#123;</span><br><span class="line">    <span class="keyword">const</span> data = privates.get(<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">return</span> data.phoneNumber</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> u = <span class="keyword">new</span> User()</span><br><span class="line"><span class="built_in">console</span>.log(u) <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(u.getPhoneNumber()) <span class="comment">// 123</span></span><br></pre></td></tr></table></figure>
<p>Tương tự như WeakMap, WeakSet cũng chỉ có thể chứa <em>object</em>, và nếu một phần tử trong WeakSet không có tham chiếu tới, nó sẽ bị giải phóng khỏi bộ nhớ.</p>
<h3 id="Ket-luan"><a href="#Ket-luan" class="headerlink" title="Kết luận"></a>Kết luận</h3><p>Với những cải tiến so với <em>object</em> thông thường, Map sẽ là công cụ hữu hiệu để lưu trữ dữ liệu dạng (khóa, giá trị). Trong khi đó, Set giúp bạn lưu trữ chuỗi dữ liệu mà không lo lắng về việc trùng lắp giá trị.</p>
<h4 id="Tham-khao"><a href="#Tham-khao" class="headerlink" title="Tham khảo"></a>Tham khảo</h4><p>[1] Axel Rauschmayer. ECMAScript 6: maps and sets. <a href="http://2ality.com/2015/01/es6-maps-sets.html" target="_blank" rel="noopener">http://2ality.com/2015/01/es6-maps-sets.html</a></p>
<p>[2] Keyed Collections - JavaScript | MDN. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Keyed_collections" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Keyed_collections</a></p>
<p>[3] Steve Brownlee. WeakMap for JavaScript Private Data. <a href="https://www.stevebrownlee.com/weakmap-javascript-private-data/" target="_blank" rel="noopener">https://www.stevebrownlee.com/weakmap-javascript-private-data/</a></p>
<span>Source: </span><a href="https://ehkoo.com/bai-viet/map-set-javascript-es6-es2015" target="_blank" title="https://ehkoo.com/bai-viet/map-set-javascript-es6-es2015" class="post-from">https://ehkoo.com/bai-viet/map-set-javascript-es6-es2015</a></div></div></article></div></section><div class="wrap"><footer><div class="paginator"><a href="/2018/07/Tim-hieu-ve-Proxy-trong-ES6.html" class="prev">NEXT</a><a href="/2018/07/Tong-hop-nhung-tinh-nang-ES6-noi-bat.html" class="next">PREV</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://nthung2112.github.io">Hung Tan Nguyen</a>, unless otherwise noted.</p></div></footer></div><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-41935289-1",'auto');ga('send','pageview');</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script src="/js/zoom.js"></script><script src="/js/insight.js"></script></body></html>